

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>数据库原理(一)总览 [ Dnull_P Welcome~ ]</title>
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/Genso.css">
  
  <link rel="stylesheet" href="/css/layout/layout.css">
  
  <link rel="stylesheet" href="/css/layout/navigator.css">
  
  <link rel="stylesheet" href="/css/layout/page-container.css">
  
  <link rel="stylesheet" href="/css/layout/page-cover.css">
  
  <link rel="stylesheet" href="/css/layout/slidebar.css">
  
  <link rel="stylesheet" href="/css/index/index.css">
  
  <link rel="stylesheet" href="/css/index/recommend-card-container.css">
  
  <link rel="stylesheet" href="/css/index/card-container.css">
  
  <link rel="stylesheet" href="/css/index/card.css">
  
  <link rel="stylesheet" href="/css/post/post.css">
  
  <link rel="stylesheet" href="/css/post/idea.css">
  
  <link rel="stylesheet" href="/css/tool/color.css">
  
  
  <script>
    const urlList = ('https://s2.loli.net/2023/07/23/mivfcl7wqgVsYdP.jpg,https://s2.loli.net/2023/07/23/E3uyek7OVlJgtLT.jpg,https://s2.loli.net/2023/07/23/q9skN6cPAZ14fwH.png,https://s2.loli.net/2023/07/23/RedmkprBY81ZhaV.jpg,https://s2.loli.net/2023/07/23/pt1ArR7NqO8vMXl.png,https://s2.loli.net/2023/07/23/MZEW5UCFSBPiNvH.png,https://s2.loli.net/2023/07/23/8urpklSmq6xR5LF.jpg,https://s2.loli.net/2023/07/23/E6Os9tkrRP4FZ7f.jpg,https://s2.loli.net/2023/07/23/IPq4HsZCOfTMGxk.jpg,https://s2.loli.net/2023/07/23/sAhIbjyLeMBgfuw.jpg,https://s2.loli.net/2023/07/23/ipTsxHoDOawRrfM.png,https://s2.loli.net/2023/07/23/eTYKcWz7jb5mqyo.png,https://s2.loli.net/2023/07/23/lHLk3OMeY7qXnTP.jpg,https://s2.loli.net/2023/07/23/u9dvATztknGecmI.jpg,https://s2.loli.net/2023/07/23/calWvPZEbI9tG4o.png,https://s2.loli.net/2023/07/23/MLZr1j7hdDnIHGU.png,https://s2.loli.net/2023/07/23/PlqeV1XpgQrxI8u.jpg,https://s2.loli.net/2023/07/23/uWQXFEBh5iCcNJV.png,https://s2.loli.net/2023/07/23/xjcUksAMvHQVhim.jpg,https://s2.loli.net/2023/07/23/Bd46rfJ2HYhQGkM.jpg,https://s2.loli.net/2023/07/23/1BgtkI3Aw58qrGv.jpg,https://s2.loli.net/2023/07/23/z8naFUvWV7BfKud.jpg,https://s2.loli.net/2023/07/23/Xj4wlzuKTDQOmHh.png,https://s2.loli.net/2023/07/23/mKzLHqPkUWTivAu.png,https://s2.loli.net/2023/07/23/a36bWlVynziMrSU.jpg,https://s2.loli.net/2023/07/23/6ZNUeJAtDCRvWq8.jpg,https://s2.loli.net/2023/07/23/7nGYxgcyoi8aSIR.jpg,https://s2.loli.net/2023/07/23/EVeCvBAt1LOgJSU.jpg,https://s2.loli.net/2023/07/23/onE5MQBPGdzDROh.jpg,https://s2.loli.net/2023/07/23/316kgDancGthANM.jpg,https://s2.loli.net/2023/07/23/oeRXvLm5byqgazF.jpg,https://s2.loli.net/2023/07/23/HXj7NsSW5vyCoIn.jpg,https://s2.loli.net/2023/07/23/sqM2XznWeEol3f4.jpg,https://s2.loli.net/2023/07/23/xGAflC5roSOsJRz.jpg,https://s2.loli.net/2023/07/23/cF2oWANXImMREKx.jpg,https://s2.loli.net/2023/07/23/IqutSTML7EXRza3.jpg,https://s2.loli.net/2023/07/23/zYNG9XHIEfg4quh.png').split(',');
  </script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div class="background">
  

  <img src="https://s2.loli.net/2023/07/23/6ZNUeJAtDCRvWq8.jpg" alt="">

  <div class="title-text animate__animated animate__bounce">
    <h1>This is
      <span class="name">
        Dnull_P
      </span>
    </h1>
    Welcome Hell !

  </div>
</div>

<div class="background-coverage">
  <!--Typed text-->
  <div class="background-coverage-text">
    <span id="background-coverage-text">
    </span>
  </div>
</div>

<div class="background-occupation">

</div>

  <div class="navigator">
  <div class="navi-buttom-container">
    
    
  <a href="/" class="navi-buttom">
    <div>
      Home
    </div>
  </a>
  
  
    
  <a href="/about" class="navi-buttom">
    <div>
      About
    </div>
  </a>
  
  
    
  <a href="/contact" class="navi-buttom">
    <div>
      Contact
    </div>
  </a>
  
  
    
    <div class="navi-dropdown">
      <div class="dropbtn">
        post
      </div>
      <div class="dropdown-content">
        
        <a href="/archives">
          Aarchives
        </a>
        
        <a href="/tags">
          Tags
        </a>
        
      </div>
    </div>
  </div>
  
  
</div>

  <div class="page-container">
    <div class="slidebar-warp">
  <div class="slidebar">
    <div class="panel">

      <div class="avatar">
        <img src="/pic/avatar.jpg" alt="">
      </div>

      <div class="info">
        <div class="subinfo-1">
          <div class="subinfo-1-left">
            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Post
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  163
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Cate
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  40
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Tag
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  198
                </div>
              </div>
            </div>

          </div>

          <div class="subinfo-1-right">
            <div class="subinfo-1-right-inner">
              <div class="subinfo-1-right-front">
                This Month
              </div>
              <div class="subinfo-1-right-back random-color">
                9
              </div>
            </div>
          </div>
        </div>

        <div class="subinfo-2-wrap">
          <div class="subinfo-2">

            
            <div class="sociallink">
    <a href=https://github.com/DnullP>
      <img src="/svg/github.svg" alt="">
    </a>
</div>
            

          </div>
        </div>
      </div>

      <div class="more-opt">

      </div>

    </div>

    <div class="icon-warp">


      <button class="hide-slidebar-button">
        <img src="/svg/arrow-right-line.svg" id="slideBarArrow">
      </button>


    </div>
  </div>
</div>

    <div class="content">
      <div class="post">
  <h1>数据库原理(一)总览</h1>
  <h1 id="数据库的作用"><a href="#数据库的作用" class="headerlink" title="数据库的作用"></a>数据库的作用</h1><p>早些时候我们使用文件来储存和操作数据, 但是对于大量的数据和操作并不理想, 针对其中缺陷, 我们可以映射出数据库需要提供的功能.</p>
<ul>
<li>解决数据冗余和一致性问题</li>
<li>访问数据的困难</li>
<li>数据隔离</li>
<li>完整性问题</li>
<li>原子性问题</li>
<li>并发访问问题</li>
</ul>
<h1 id="数据视图"><a href="#数据视图" class="headerlink" title="数据视图"></a>数据视图</h1><p>数据视图可以看作对于数据的抽象</p>
<p>首先我们明确一下抽象(abstraction)的定义:</p>
<blockquote>
<p>抽象是对于事物属性中, 我们感兴趣的那一部分共有属性的提取, 使我们可以只专注于感兴趣的特定部分</p>
</blockquote>
<p>于是数据视图是根据用户感兴趣的程度, 提供不同的数据, 进行整理修改后提供的特定呈现模式</p>
<h2 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h2><ul>
<li>Relational Model(关系模型)</li>
<li>Entity-Relationship Model(实体-联系模型)</li>
<li>Semi-structured Model(半结构化模型)</li>
<li>Object-oriented Model(面向对象模型)</li>
</ul>
<h2 id="数据抽象"><a href="#数据抽象" class="headerlink" title="数据抽象"></a>数据抽象</h2><p>这一部分是更纯粹的数据抽象, 我们从不同的level来关注数据:</p>
<ul>
<li>logical level</li>
<li>phyiscal level</li>
</ul>
<h1 id="Database-Design"><a href="#Database-Design" class="headerlink" title="Database Design"></a>Database Design</h1><p>数据库的设计我们一般认为是数据库的schema的设计</p>
<p>schema可以看作对于需求的数据库概念实现, 通过实例化schema来让业务的数据需求再数据库中实现</p>
<p>我们可以将设计过程概括为下图:</p>
<div class="mermaid">flowchart LR
    subgraph A[Data model]
        direction LR
        A_1[Relational Model]
        A_2[Entity-Relationship Model]
        A_3[Semi-structured Model]
        A_4[Object-oriented Model]
    end

    B[model concept]

    A -->|选择模型| B

    direction LR

    D["Functional \n requirement \n Specification"]

    C[conceptual schema]

    E{根据需求使用 \n concept构建schema}

    B --> E
    D --> E

    E --> C</div><h1 id="数据库系统"><a href="#数据库系统" class="headerlink" title="数据库系统"></a>数据库系统</h1><p>数据库系统包含三个主要组件:</p>
<ul>
<li>storage manager</li>
<li>query processor</li>
<li>transaction manager</li>
</ul>
<h2 id="storage-manager"><a href="#storage-manager" class="headerlink" title="storage manager"></a>storage manager</h2><p>具体职责如下:</p>
<div class="mermaid">flowchart LR

A[DML]
C[file system]

subgraph B[storage manager]
    
    subgraph B_1[resposiblity]
        B_1_1[Authorization]
        B_1_2[integrity management]
        B_1_3[transaction management]
        B_1_4[file management]
        B_1_5[buffer management]
    end
    
    subgraph B_2[Data structure]
        B_2_1[Data files]
        B_2_2[Data dictionary]
        B_2_3[indices]
    end
end

A --> B

B --> C</div><ul>
<li><p>Authorization: 对用户的权限进行验证, 保证用户只能访问其有权限的数据. 要知道, 用户数据大多数时候也是以数据形式储存在数据库中的, 所以交由storage management来验证用户权限是说得通的</p>
</li>
<li><p>integrity management: 保证数据的完整性, 这主要是要求对数据的修改必须满足数据的约束(constraint), 不破坏schema</p>
</li>
<li><p>transaction management: 保证事务的原子性, 一致性, 隔离性, 持久性</p>
</li>
<li><p>file management: 数据本身是要持久化到文件中的, 所以需要对文件进行管理, 包括文件的创建, 删除, 修改, 读取等</p>
</li>
<li><p>buffer management: 与数据的交互中间需要经过一层内存, 用于数据交互的缓存</p>
</li>
<li><p>indices: 索引, 对数据建立索引加快了对数据的查询, 具体建立索引的方式涉及到底层的数据结构, 不在此展开</p>
</li>
</ul>
<h2 id="query-processor"><a href="#query-processor" class="headerlink" title="query processor"></a>query processor</h2><p>查询处理主要是转化用户的指令, 让storage manager能够理解并执行相应的底层操作</p>
<ul>
<li>DDL: 数据定义语言, 用于定义schema</li>
<li>DML: 数据操作语言, 用于对数据进行操作</li>
<li>Query evaluation engine: 查询执行引擎, 用于执行查询语句</li>
</ul>
<h2 id="transaction-manager"><a href="#transaction-manager" class="headerlink" title="transaction manager"></a>transaction manager</h2><p>管理事务</p>
<h3 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a>ACID</h3><ul>
<li>Atomicity: 原子性, 事务要么全部执行, 要么全部不执行</li>
<li>Consistency: 一致性, 事务执行前后, 数据库的状态要保持一致</li>
<li>Isolation: 隔离性, 事务之间互不干扰</li>
<li>Durability: 持久性, 事务执行后, 数据库的状态要持久化</li>
</ul>
<h1 id="数据库系统的架构"><a href="#数据库系统的架构" class="headerlink" title="数据库系统的架构"></a>数据库系统的架构</h1><h2 id="数据库系统自身架构"><a href="#数据库系统自身架构" class="headerlink" title="数据库系统自身架构"></a>数据库系统自身架构</h2><div class="mermaid">flowchart TB
    subgraph D[User]
        D_1[native user]
        D_2[application programmer]
        D_3[sophisticated user]
        D_4[database administrator]
    end

    D_1 -->|use| E_1[application interfaces]
    D_2 -->|write| E_2[application interfaces]
    D_3 -->|use| E_3[query tools]
    D_4 -->|use| E_4[administerators tools]

    E_1 --> A_5
    E_2 --> A_3
    E_3 --> A_2
    E_4 --> A_1

    subgraph A[query processor]
        direction TB
        A_1[DDL interpreter]
        A_2[DML queries]
        A_3[compiler and linker]
        A_4[DML compiler and organizer]
        A_5[application program object code]
        A_6[query evaluation engine]

        A_2 --> A_4

        A_3 --> A_2
        A_3 --> A_5

        A_5 --> A_2
        A_5 --> A_6

        A_4 --> A_6

        
    end

    

    subgraph B[storage manager]
        B_1[authorization and integrity manager]
        B_2[transaction manager]
        B_3[file manager]
        B_4[buffer manager]
    end

    

    A_6 --> B_1
    A_6 --> B_2
    A_6 --> B_3
    A_6 --> B_4

    subgraph C[disk storage]
        C_1[data]
        C_2[indices]
        C_3[data dictionary]
        C_4[statistical data]
    end  

    B_3 --- C_1
    B_3 --- C_2

    B_4 --- C_1
    B_4 --- C_2

    A_4 --- C_3
    A_4 --- C_4

    B_1 --- C_3</div><p>自身架构的基本逻辑是, 不同的用户通过不同的工具接入查询处理层, 在这个层将不同形式的查询和操作统一翻译为数据库能够理解的语言, 交由storage manager进行处理, 最后将数据持久化到设备中</p>
<h2 id="数据库使用架构"><a href="#数据库使用架构" class="headerlink" title="数据库使用架构"></a>数据库使用架构</h2><p>使用场景的架构大致分为两类:</p>
<ul>
<li>双层架构</li>
<li>三层架构</li>
</ul>
<h3 id="双层架构"><a href="#双层架构" class="headerlink" title="双层架构"></a>双层架构</h3><p>双层架构场景比较简单, 只有数据库和数据库使用者, 主要是直接提供数据库服务, 一般是2b服务</p>
<h3 id="三层架构"><a href="#三层架构" class="headerlink" title="三层架构"></a>三层架构</h3><p>三层架构是在用户和数据库之间提供一个业务层, 也是当下互联网的一个基本架构逻辑</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
</div>

<div id="paginator">
  
</div>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({
    securityLevel: 'loose',
    theme: 'base',
  });
</script>


<!-- scripts list from theme config.yml -->

<script src="/js/post/mermaid.js"></script>


    </div>

  </div>



  
  <!-- scripts list from theme config.yml -->
  
  <script src="/js/layout/animation.js"></script>
  
  <script src="/js/layout/svg.js"></script>
  
  <script src="/js/csstool.js"></script>
  
  

</body>

</html>