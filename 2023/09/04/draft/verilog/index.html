

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>verilog基础 [ Dnull_P Welcome~ ]</title>
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/Genso.css">
  
  <link rel="stylesheet" href="/css/layout/layout.css">
  
  <link rel="stylesheet" href="/css/layout/navigator.css">
  
  <link rel="stylesheet" href="/css/layout/page-container.css">
  
  <link rel="stylesheet" href="/css/layout/page-cover.css">
  
  <link rel="stylesheet" href="/css/layout/slidebar.css">
  
  <link rel="stylesheet" href="/css/index/index.css">
  
  <link rel="stylesheet" href="/css/index/recommend-card-container.css">
  
  <link rel="stylesheet" href="/css/index/card-container.css">
  
  <link rel="stylesheet" href="/css/index/card.css">
  
  <link rel="stylesheet" href="/css/post/post.css">
  
  <link rel="stylesheet" href="/css/post/idea.css">
  
  <link rel="stylesheet" href="/css/tool/color.css">
  
  
  <script>
    const urlList = ('https://s2.loli.net/2023/07/23/mivfcl7wqgVsYdP.jpg,https://s2.loli.net/2023/07/23/E3uyek7OVlJgtLT.jpg,https://s2.loli.net/2023/07/23/q9skN6cPAZ14fwH.png,https://s2.loli.net/2023/07/23/RedmkprBY81ZhaV.jpg,https://s2.loli.net/2023/07/23/pt1ArR7NqO8vMXl.png,https://s2.loli.net/2023/07/23/MZEW5UCFSBPiNvH.png,https://s2.loli.net/2023/07/23/8urpklSmq6xR5LF.jpg,https://s2.loli.net/2023/07/23/E6Os9tkrRP4FZ7f.jpg,https://s2.loli.net/2023/07/23/IPq4HsZCOfTMGxk.jpg,https://s2.loli.net/2023/07/23/sAhIbjyLeMBgfuw.jpg,https://s2.loli.net/2023/07/23/ipTsxHoDOawRrfM.png,https://s2.loli.net/2023/07/23/eTYKcWz7jb5mqyo.png,https://s2.loli.net/2023/07/23/lHLk3OMeY7qXnTP.jpg,https://s2.loli.net/2023/07/23/u9dvATztknGecmI.jpg,https://s2.loli.net/2023/07/23/calWvPZEbI9tG4o.png,https://s2.loli.net/2023/07/23/MLZr1j7hdDnIHGU.png,https://s2.loli.net/2023/07/23/PlqeV1XpgQrxI8u.jpg,https://s2.loli.net/2023/07/23/uWQXFEBh5iCcNJV.png,https://s2.loli.net/2023/07/23/xjcUksAMvHQVhim.jpg,https://s2.loli.net/2023/07/23/Bd46rfJ2HYhQGkM.jpg,https://s2.loli.net/2023/07/23/1BgtkI3Aw58qrGv.jpg,https://s2.loli.net/2023/07/23/z8naFUvWV7BfKud.jpg,https://s2.loli.net/2023/07/23/Xj4wlzuKTDQOmHh.png,https://s2.loli.net/2023/07/23/mKzLHqPkUWTivAu.png,https://s2.loli.net/2023/07/23/a36bWlVynziMrSU.jpg,https://s2.loli.net/2023/07/23/6ZNUeJAtDCRvWq8.jpg,https://s2.loli.net/2023/07/23/7nGYxgcyoi8aSIR.jpg,https://s2.loli.net/2023/07/23/EVeCvBAt1LOgJSU.jpg,https://s2.loli.net/2023/07/23/onE5MQBPGdzDROh.jpg,https://s2.loli.net/2023/07/23/316kgDancGthANM.jpg,https://s2.loli.net/2023/07/23/oeRXvLm5byqgazF.jpg,https://s2.loli.net/2023/07/23/HXj7NsSW5vyCoIn.jpg,https://s2.loli.net/2023/07/23/sqM2XznWeEol3f4.jpg,https://s2.loli.net/2023/07/23/xGAflC5roSOsJRz.jpg,https://s2.loli.net/2023/07/23/cF2oWANXImMREKx.jpg,https://s2.loli.net/2023/07/23/IqutSTML7EXRza3.jpg,https://s2.loli.net/2023/07/23/zYNG9XHIEfg4quh.png').split(',');
  </script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div class="background">
  

  <img src="https://s2.loli.net/2023/07/23/cF2oWANXImMREKx.jpg" alt="">

  <div class="title-text animate__animated animate__bounce">
    <h1>This is
      <span class="name">
        Dnull_P
      </span>
    </h1>
    Welcome Hell !

  </div>
</div>

<div class="background-coverage">
  <!--Typed text-->
  <div class="background-coverage-text">
    <span id="background-coverage-text">
    </span>
  </div>
</div>

<div class="background-occupation">

</div>

  <div class="navigator">
  <div class="navi-buttom-container">
    
    
  <a href="/" class="navi-buttom">
    <div>
      Home
    </div>
  </a>
  
  
    
  <a href="/about" class="navi-buttom">
    <div>
      About
    </div>
  </a>
  
  
    
  <a href="/contact" class="navi-buttom">
    <div>
      Contact
    </div>
  </a>
  
  
    
    <div class="navi-dropdown">
      <div class="dropbtn">
        post
      </div>
      <div class="dropdown-content">
        
        <a href="/archives">
          Aarchives
        </a>
        
        <a href="/tags">
          Tags
        </a>
        
      </div>
    </div>
  </div>
  
  
</div>

  <div class="page-container">
    <div class="slidebar-warp">
  <div class="slidebar">
    <div class="panel">

      <div class="avatar">
        <img src="/pic/avatar.jpg" alt="">
      </div>

      <div class="info">
        <div class="subinfo-1">
          <div class="subinfo-1-left">
            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Post
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  163
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Cate
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  40
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Tag
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  198
                </div>
              </div>
            </div>

          </div>

          <div class="subinfo-1-right">
            <div class="subinfo-1-right-inner">
              <div class="subinfo-1-right-front">
                This Month
              </div>
              <div class="subinfo-1-right-back random-color">
                9
              </div>
            </div>
          </div>
        </div>

        <div class="subinfo-2-wrap">
          <div class="subinfo-2">

            
            <div class="sociallink">
    <a href=https://github.com/DnullP>
      <img src="/svg/github.svg" alt="">
    </a>
</div>
            

          </div>
        </div>
      </div>

      <div class="more-opt">

      </div>

    </div>

    <div class="icon-warp">


      <button class="hide-slidebar-button">
        <img src="/svg/arrow-right-line.svg" id="slideBarArrow">
      </button>


    </div>
  </div>
</div>

    <div class="content">
      <div class="post">
  <h1>verilog基础</h1>
  <h1 id="verilog特性"><a href="#verilog特性" class="headerlink" title="verilog特性"></a>verilog特性</h1><p>在开始基本语法前, 先强调两点关于verilog这种硬件编程语言和C的区别:</p>
<ul>
<li>verilog是硬件实现, 所以具有并发性</li>
<li>verilog带有内建时间模型</li>
</ul>
<h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><p>模块化的重要性不用多说, verilog中的功能是通过模块来分别实现的:</p>
<p>比如接下来我们实现一个简单的与门:</p>
<pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">and_gate</span><span class="token punctuation">(</span>
    <span class="token keyword">input</span> a<span class="token punctuation">,</span>
    <span class="token keyword">input</span> b<span class="token punctuation">,</span>
    <span class="token keyword">output</span> y
<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">assign</span> y <span class="token operator">=</span> a <span class="token operator">&amp;</span> b<span class="token punctuation">;</span>

<span class="token keyword">endmodule</span></code></pre><p><code>verilog</code></p>
<p>这里我们定义了一个与门模块</p>
<p>然后在其他的模块中使用这个模块:</p>
<pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">top</span><span class="token punctuation">(</span>
    <span class="token keyword">input</span> a<span class="token punctuation">,</span>
    <span class="token keyword">input</span> b<span class="token punctuation">,</span>
    <span class="token keyword">output</span> y
<span class="token punctuation">)</span><span class="token punctuation">;</span>
and_gate <span class="token function">and_gate1</span><span class="token punctuation">(</span>
<span class="token punctuation">.</span>a      <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span>b      <span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span>y      <span class="token punctuation">(</span>y<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">endmodule</span></code></pre><h1 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h1><h2 id="多bit变量处理"><a href="#多bit变量处理" class="headerlink" title="多bit变量处理"></a>多bit变量处理</h2><pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">and_gate</span><span class="token punctuation">(</span>
    <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span>
    <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> b<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> y
<span class="token punctuation">)</span>
    <span class="token keyword">assign</span> y <span class="token operator">=</span> a <span class="token operator">&amp;</span> b<span class="token punctuation">;</span>
    <span class="token keyword">assign</span> y <span class="token operator">=</span> <span class="token operator">&amp;</span>y<span class="token punctuation">;</span>

<span class="token keyword">endmodule</span></code></pre><p>第二个赋值表示将y中的所有bit进行与操作</p>
<h2 id="中间变量"><a href="#中间变量" class="headerlink" title="中间变量"></a>中间变量</h2><p>模块理论上只有输入输出可见, 过程中使用的变量我们便称为中间变量, 体现在电路中就是合并的线路, 所以我们使用<code>wire</code>来表示一个端口以外的模块变量</p>
<h2 id="四个状态"><a href="#四个状态" class="headerlink" title="四个状态"></a>四个状态</h2><p>每个bit有四个状态: 0,1,x,z</p>
<p>分别代表: 低电平, 高电平, 未知态, 高阻态</p>
<h2 id="数据表示方式"><a href="#数据表示方式" class="headerlink" title="数据表示方式"></a>数据表示方式</h2><p>除了一般的十进制表示外, 芯片中常用的就是二进制的bit</p>
<p>为了表示一个bit数据, 我们使用<code>b</code>前缀, 具体格式为:<code>&lt;int&gt;&#39;b&lt;data&gt;</code></p>
<p>其中的<code>int</code>表示位数, <code>data</code>为01数据</p>
<p>类似的, 我们使用<code>h</code>表示16进制数据, <code>o</code>表示8进制数据 </p>
<h2 id="位拼接"><a href="#位拼接" class="headerlink" title="位拼接"></a>位拼接</h2><pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token keyword">assign</span> y <span class="token operator">=</span> <span class="token operator">&#123;</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token number">3'b101</span><span class="token operator">&#125;</span><span class="token punctuation">;</span></code></pre><p>这一段将三个比特拼接起来</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>变量主要有两种: <code>wire</code>和<code>reg</code></p>
<p>我们想象两者为电路中的线路和寄存器, wire只用于连接组合逻辑, 而reg可以持久化地储存数据, 所以wire一般直接用于组合电路, 并且作为右值, 而reg更适合用于时序电路, 并且作为左值</p>
<h2 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h2><p>在always块外, 我们使用<code>assign</code>来定义组合逻辑, 也就是相当于进行”连线”这一操作</p>
<p>在always块内, 我们更倾向于使用<code>=</code>和<code>&lt;=</code>来给<code>reg</code>进行赋值</p>
<p>其中<code>=</code>为阻塞赋值, 行为为同步, <code>&lt;=</code>为非阻塞赋值, 行为为并发</p>
<p>两者左值都要求为reg</p>
<h2 id="always"><a href="#always" class="headerlink" title="always"></a>always</h2><p><code>always</code>检测的是信号的变化, 被加入到<strong>敏感</strong>列表中的变量都会被检测, 当信号发生变化时, 则触发always块</p>
<p>特别的, 使用<code>posedge</code>和<code>negedge</code>来检测信号的上升沿和下降沿</p>
<pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> signal_a<span class="token punctuation">)</span> <span class="token keyword">begin</span>
    <span class="token comment">// do something</span>
<span class="token keyword">end</span></code></pre><h2 id="阻塞和非阻塞赋值的细节"><a href="#阻塞和非阻塞赋值的细节" class="headerlink" title="阻塞和非阻塞赋值的细节"></a>阻塞和非阻塞赋值的细节</h2><p>阻塞赋值会由于赋值的顺序, 导致编译器优化连续赋值:</p>
<pre class="language-verilog" data-language="verilog"><code class="language-verilog">a <span class="token operator">=</span> b
b <span class="token operator">=</span> c
c <span class="token operator">=</span> d</code></pre><p>我们希望的本来是每个值都向前传给下一个寄存器, 但是优化后就会变成:</p>
<pre class="language-verilog" data-language="verilog"><code class="language-verilog">a <span class="token operator">=</span> d
b <span class="token operator">=</span> d
c <span class="token operator">=</span> d</code></pre><p>这是由于硬件的所有逻辑都是并发的, 语言描述的是硬件实体, a &#x3D; b表示的其实是将a和b相连, 而不是单纯的赋值, 相连后构成的电路是实时变化的组合电路</p>
<p>如果要像一般的赋值一样, 我们需要使用到时序电路和非阻塞赋值</p>
<p>在clk的上升沿时使用非阻塞赋值是我们最常做的方式, 这样能够描述一个时序电路, 从而模拟出我们所谓的”赋值”过程 (把一个值传递给另一个元件)</p>
<h3 id="非阻塞赋值进一步细节"><a href="#非阻塞赋值进一步细节" class="headerlink" title="非阻塞赋值进一步细节"></a>非阻塞赋值进一步细节</h3><p>非阻塞赋值具体的行为是, 将当前触发的赋值放到下一个always的触发时刻一起触发, 也就是说当前块中的赋值是全部一起发生的, 这就使得我们不能在一次触发中给一个相同的变量赋上相同的值</p>
<p>如果我们要给同一个寄存器, 在不同的情况下进行不同的赋值, 我们需要通过if语句进入不同的控制流来实现同一变量的<strong>互斥</strong>赋值</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>关于verilog语言本身需要注意的地方并不多, 硬件设计更重要的是元件的设计, 就像使用计数器来统计数量就比寄存器+加法器要好很多. 又或者是我们需要设置一个全局的时钟信号来同步设备的运作.</p>
<p>很多的设计原理和硬件设计相关, 所以如何建立起良好的硬件意识才是更重要的事情, 对于编写Verilog来说.<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"></p>

</div>

<div id="paginator">
  
</div>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({
    securityLevel: 'loose',
    theme: 'base',
  });
</script>


<!-- scripts list from theme config.yml -->

<script src="/js/post/mermaid.js"></script>


    </div>

  </div>



  
  <!-- scripts list from theme config.yml -->
  
  <script src="/js/layout/animation.js"></script>
  
  <script src="/js/layout/svg.js"></script>
  
  <script src="/js/csstool.js"></script>
  
  

</body>

</html>