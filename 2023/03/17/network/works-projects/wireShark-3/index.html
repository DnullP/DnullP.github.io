

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>wireshark practice 3 - DNS [ Dnull_P Welcome~ ]</title>
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/Genso.css">
  
  <link rel="stylesheet" href="/css/layout/layout.css">
  
  <link rel="stylesheet" href="/css/layout/navigator.css">
  
  <link rel="stylesheet" href="/css/layout/page-container.css">
  
  <link rel="stylesheet" href="/css/layout/page-cover.css">
  
  <link rel="stylesheet" href="/css/layout/slidebar.css">
  
  <link rel="stylesheet" href="/css/index/index.css">
  
  <link rel="stylesheet" href="/css/index/recommend-card-container.css">
  
  <link rel="stylesheet" href="/css/index/card-container.css">
  
  <link rel="stylesheet" href="/css/index/card.css">
  
  <link rel="stylesheet" href="/css/post/post.css">
  
  <link rel="stylesheet" href="/css/post/idea.css">
  
  <link rel="stylesheet" href="/css/tool/color.css">
  
  
  <script>
    const urlList = ('https://s2.loli.net/2023/07/23/mivfcl7wqgVsYdP.jpg,https://s2.loli.net/2023/07/23/E3uyek7OVlJgtLT.jpg,https://s2.loli.net/2023/07/23/q9skN6cPAZ14fwH.png,https://s2.loli.net/2023/07/23/RedmkprBY81ZhaV.jpg,https://s2.loli.net/2023/07/23/pt1ArR7NqO8vMXl.png,https://s2.loli.net/2023/07/23/MZEW5UCFSBPiNvH.png,https://s2.loli.net/2023/07/23/8urpklSmq6xR5LF.jpg,https://s2.loli.net/2023/07/23/E6Os9tkrRP4FZ7f.jpg,https://s2.loli.net/2023/07/23/IPq4HsZCOfTMGxk.jpg,https://s2.loli.net/2023/07/23/sAhIbjyLeMBgfuw.jpg,https://s2.loli.net/2023/07/23/ipTsxHoDOawRrfM.png,https://s2.loli.net/2023/07/23/eTYKcWz7jb5mqyo.png,https://s2.loli.net/2023/07/23/lHLk3OMeY7qXnTP.jpg,https://s2.loli.net/2023/07/23/u9dvATztknGecmI.jpg,https://s2.loli.net/2023/07/23/calWvPZEbI9tG4o.png,https://s2.loli.net/2023/07/23/MLZr1j7hdDnIHGU.png,https://s2.loli.net/2023/07/23/PlqeV1XpgQrxI8u.jpg,https://s2.loli.net/2023/07/23/uWQXFEBh5iCcNJV.png,https://s2.loli.net/2023/07/23/xjcUksAMvHQVhim.jpg,https://s2.loli.net/2023/07/23/Bd46rfJ2HYhQGkM.jpg,https://s2.loli.net/2023/07/23/1BgtkI3Aw58qrGv.jpg,https://s2.loli.net/2023/07/23/z8naFUvWV7BfKud.jpg,https://s2.loli.net/2023/07/23/Xj4wlzuKTDQOmHh.png,https://s2.loli.net/2023/07/23/mKzLHqPkUWTivAu.png,https://s2.loli.net/2023/07/23/a36bWlVynziMrSU.jpg,https://s2.loli.net/2023/07/23/6ZNUeJAtDCRvWq8.jpg,https://s2.loli.net/2023/07/23/7nGYxgcyoi8aSIR.jpg,https://s2.loli.net/2023/07/23/EVeCvBAt1LOgJSU.jpg,https://s2.loli.net/2023/07/23/onE5MQBPGdzDROh.jpg,https://s2.loli.net/2023/07/23/316kgDancGthANM.jpg,https://s2.loli.net/2023/07/23/oeRXvLm5byqgazF.jpg,https://s2.loli.net/2023/07/23/HXj7NsSW5vyCoIn.jpg,https://s2.loli.net/2023/07/23/sqM2XznWeEol3f4.jpg,https://s2.loli.net/2023/07/23/xGAflC5roSOsJRz.jpg,https://s2.loli.net/2023/07/23/cF2oWANXImMREKx.jpg,https://s2.loli.net/2023/07/23/IqutSTML7EXRza3.jpg,https://s2.loli.net/2023/07/23/zYNG9XHIEfg4quh.png').split(',');
  </script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div class="background">
  

  <img src="https://s2.loli.net/2023/07/23/8urpklSmq6xR5LF.jpg" alt="">

  <div class="title-text animate__animated animate__bounce">
    <h1>This is
      <span class="name">
        Dnull_P
      </span>
    </h1>
    Welcome Hell !

  </div>
</div>

<div class="background-coverage">
  <!--Typed text-->
  <div class="background-coverage-text">
    <span id="background-coverage-text">
    </span>
  </div>
</div>

<div class="background-occupation">

</div>

  <div class="navigator">
  <div class="navi-buttom-container">
    
    
  <a href="/" class="navi-buttom">
    <div>
      Home
    </div>
  </a>
  
  
    
  <a href="/about" class="navi-buttom">
    <div>
      About
    </div>
  </a>
  
  
    
  <a href="/contact" class="navi-buttom">
    <div>
      Contact
    </div>
  </a>
  
  
    
    <div class="navi-dropdown">
      <div class="dropbtn">
        post
      </div>
      <div class="dropdown-content">
        
        <a href="/archives">
          Aarchives
        </a>
        
        <a href="/tags">
          Tags
        </a>
        
      </div>
    </div>
  </div>
  
  
</div>

  <div class="page-container">
    <div class="slidebar-warp">
  <div class="slidebar">
    <div class="panel">

      <div class="avatar">
        <img src="/pic/avatar.jpg" alt="">
      </div>

      <div class="info">
        <div class="subinfo-1">
          <div class="subinfo-1-left">
            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Post
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  163
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Cate
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  40
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Tag
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  198
                </div>
              </div>
            </div>

          </div>

          <div class="subinfo-1-right">
            <div class="subinfo-1-right-inner">
              <div class="subinfo-1-right-front">
                This Month
              </div>
              <div class="subinfo-1-right-back random-color">
                9
              </div>
            </div>
          </div>
        </div>

        <div class="subinfo-2-wrap">
          <div class="subinfo-2">

            
            <div class="sociallink">
    <a href=https://github.com/DnullP>
      <img src="/svg/github.svg" alt="">
    </a>
</div>
            

          </div>
        </div>
      </div>

      <div class="more-opt">

      </div>

    </div>

    <div class="icon-warp">


      <button class="hide-slidebar-button">
        <img src="/svg/arrow-right-line.svg" id="slideBarArrow">
      </button>


    </div>
  </div>
</div>

    <div class="content">
      <div class="post">
  <h1>wireshark practice 3 - DNS</h1>
  <ol>
<li>Run nslookup to obtain the IP address of a Web server in Asia. What is the IP address of that server?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">nslookup www.baidu.com
Server:  UnKnown
Address:  10.3.9.44

Non-authoritative answer:
Name:    www.a.shifen.com
Addresses:  39.156.66.14
          39.156.66.18
Aliases:  www.baidu.com</code></pre><ol start="2">
<li>Run nslookup to determine the authoritative DNS servers for a university in Europe.</li>
</ol>
<pre class="language-" data-language=""><code class="language-">nslookup -type&#x3D;NS bupt.edu.cn
Server:  UnKnown
Address:  10.3.9.44

Non-authoritative answer:
bupt.edu.cn     nameserver &#x3D; ns.buptnet.edu.cn
bupt.edu.cn     nameserver &#x3D; gus.buptnet.edu.cn</code></pre><ol start="3">
<li>Run nslookup so that one of the DNS servers obtained in Question 2 is queried for the mail servers for Yahoo! mail.   What is its IP address?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">nslookup www.baidu.com ns.buptnet.edu.cn
Server:  UnKnown
Address:  2001:da8:202:10::37</code></pre><p>国内没有yahoo, 用百度代替</p>
<hr>
<p>这一部分使用wireshark进行抓包分析</p>
<ol start="4">
<li>Locate the DNS query and response messages. Are then sent over UDP or TCP?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">UDP</code></pre><ol start="5">
<li>What is the destination port for the DNS query message? What is the source port of DNS response message?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">Source Address: 10.21.180.15
Destination Address: 10.3.9.44</code></pre><ol start="6">
<li>To what IP address is the DNS query message sent? Use ipconfig to determine the IP address of your local DNS server. Are these two IP addresses the same?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">DNS Servers . . . . . . . . . . . : 10.3.9.44 &#x2F;&#x2F;the same
                                    10.3.9.45</code></pre><ol start="7">
<li>Examine the DNS query message. What “Type” of DNS query is it? Does the query message contain any “answers”?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">一些是A类型, 一些是AAAA类型查询
在response中的类型可能包含一些CNAME类型, 这是域名的别名</code></pre><ol start="8">
<li>Examine the DNS response message. How many “answers” are provided? What do each of these answers contain?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">有些提供两个有些提供三个, 其中包含两个不同的DNS地址和一个CNAME别名</code></pre><hr>
<ol start="9">
<li>Consider the subsequent TCP SYN packet sent by your host. Does the destination  IP address of the SYN packet correspond to any of the IP addresses provided in the DNS response message?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">一样的, 但是发送的双方都使用的是ipv6地址, 导致之前使用IPV4地址过滤时查不到</code></pre><ol start="10">
<li>This web page contains images. Before retrieving each image, does your host issue new DNS queries?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">后面确实还有一些DNS查询, 但是看起来并不是为了获取图片而进行的
图片的请求应该使用的QUIC协议, 并且内容受到保护的样子</code></pre><hr>
<p>下面是对nslookup的抓包:</p>
<ol start="11">
<li>   What is the destination port for the DNS query message? What is the source port of DNS response message?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">both are 53</code></pre><ol start="12">
<li>   To what IP address is the DNS query message sent? Is this the IP address of your default local DNS server?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">yes, it is 10.3.9.44</code></pre><ol start="13">
<li>   Examine the DNS query message. What “Type” of DNS query is it? Does the query message contain any “answers”?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">Type is A and AAAA, and it contains some answers</code></pre><ol start="14">
<li>   Examine the DNS response message. How many “answers” are provided? What do each of these answers contain?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">it contains three answers, two of them are CNAME and one is A</code></pre><ol start="15">
<li>   Provide a screenshot.</li>
</ol>
<pre class="language-" data-language=""><code class="language-">no way</code></pre><hr>
<ol start="16">
<li>   To what IP address is the DNS query message sent? Is this the IP address of your default local DNS server?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">学校的dns查不到mit的域名, 所以使用google的公共DNS做替代:
2001:4860:4860::8888
显然不是我的默认DNS服务器</code></pre><ol start="17">
<li>   Examine the DNS query message. What “Type” of DNS query is it? Does the query message contain any “answers”?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">当然是NS类型, nslookup的参数设定里就是这么查询的</code></pre><ol start="18">
<li>   Examine the DNS response message. What MIT nameservers does the response message provide? Does this response message also provide the IP addresses of the MIT namesers?</li>
</ol>
<pre class="language-" data-language=""><code class="language-">Only provide the name of the MIT nameservers, not the IP addresses</code></pre><ol start="19">
<li>   Provide a screenshot.</li>
</ol>
<pre class="language-" data-language=""><code class="language-">no way</code></pre><p>最后三个差不多, 就不做了</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
</div>

<div id="paginator">
  
</div>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({
    securityLevel: 'loose',
    theme: 'base',
  });
</script>


<!-- scripts list from theme config.yml -->

<script src="/js/post/mermaid.js"></script>


    </div>

  </div>



  
  <!-- scripts list from theme config.yml -->
  
  <script src="/js/layout/animation.js"></script>
  
  <script src="/js/layout/svg.js"></script>
  
  <script src="/js/csstool.js"></script>
  
  

</body>

</html>