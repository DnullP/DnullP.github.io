

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title> [ Dnull_P Welcome~ ]</title>
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/Genso.css">
  
  <link rel="stylesheet" href="/css/layout/layout.css">
  
  <link rel="stylesheet" href="/css/layout/navigator.css">
  
  <link rel="stylesheet" href="/css/layout/page-container.css">
  
  <link rel="stylesheet" href="/css/layout/page-cover.css">
  
  <link rel="stylesheet" href="/css/layout/slidebar.css">
  
  <link rel="stylesheet" href="/css/index/index.css">
  
  <link rel="stylesheet" href="/css/index/recommend-card-container.css">
  
  <link rel="stylesheet" href="/css/index/card-container.css">
  
  <link rel="stylesheet" href="/css/index/card.css">
  
  <link rel="stylesheet" href="/css/post/post.css">
  
  <link rel="stylesheet" href="/css/post/idea.css">
  
  <link rel="stylesheet" href="/css/tool/color.css">
  
  
  <script>
    const urlList = ('https://s2.loli.net/2023/07/23/mivfcl7wqgVsYdP.jpg,https://s2.loli.net/2023/07/23/E3uyek7OVlJgtLT.jpg,https://s2.loli.net/2023/07/23/q9skN6cPAZ14fwH.png,https://s2.loli.net/2023/07/23/RedmkprBY81ZhaV.jpg,https://s2.loli.net/2023/07/23/pt1ArR7NqO8vMXl.png,https://s2.loli.net/2023/07/23/MZEW5UCFSBPiNvH.png,https://s2.loli.net/2023/07/23/8urpklSmq6xR5LF.jpg,https://s2.loli.net/2023/07/23/E6Os9tkrRP4FZ7f.jpg,https://s2.loli.net/2023/07/23/IPq4HsZCOfTMGxk.jpg,https://s2.loli.net/2023/07/23/sAhIbjyLeMBgfuw.jpg,https://s2.loli.net/2023/07/23/ipTsxHoDOawRrfM.png,https://s2.loli.net/2023/07/23/eTYKcWz7jb5mqyo.png,https://s2.loli.net/2023/07/23/lHLk3OMeY7qXnTP.jpg,https://s2.loli.net/2023/07/23/u9dvATztknGecmI.jpg,https://s2.loli.net/2023/07/23/calWvPZEbI9tG4o.png,https://s2.loli.net/2023/07/23/MLZr1j7hdDnIHGU.png,https://s2.loli.net/2023/07/23/PlqeV1XpgQrxI8u.jpg,https://s2.loli.net/2023/07/23/uWQXFEBh5iCcNJV.png,https://s2.loli.net/2023/07/23/xjcUksAMvHQVhim.jpg,https://s2.loli.net/2023/07/23/Bd46rfJ2HYhQGkM.jpg,https://s2.loli.net/2023/07/23/1BgtkI3Aw58qrGv.jpg,https://s2.loli.net/2023/07/23/z8naFUvWV7BfKud.jpg,https://s2.loli.net/2023/07/23/Xj4wlzuKTDQOmHh.png,https://s2.loli.net/2023/07/23/mKzLHqPkUWTivAu.png,https://s2.loli.net/2023/07/23/a36bWlVynziMrSU.jpg,https://s2.loli.net/2023/07/23/6ZNUeJAtDCRvWq8.jpg,https://s2.loli.net/2023/07/23/7nGYxgcyoi8aSIR.jpg,https://s2.loli.net/2023/07/23/EVeCvBAt1LOgJSU.jpg,https://s2.loli.net/2023/07/23/onE5MQBPGdzDROh.jpg,https://s2.loli.net/2023/07/23/316kgDancGthANM.jpg,https://s2.loli.net/2023/07/23/oeRXvLm5byqgazF.jpg,https://s2.loli.net/2023/07/23/HXj7NsSW5vyCoIn.jpg,https://s2.loli.net/2023/07/23/sqM2XznWeEol3f4.jpg,https://s2.loli.net/2023/07/23/xGAflC5roSOsJRz.jpg,https://s2.loli.net/2023/07/23/cF2oWANXImMREKx.jpg,https://s2.loli.net/2023/07/23/IqutSTML7EXRza3.jpg,https://s2.loli.net/2023/07/23/zYNG9XHIEfg4quh.png').split(',');
  </script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div class="background">
  

  <img src="https://s2.loli.net/2023/07/23/pt1ArR7NqO8vMXl.png" alt="">

  <div class="title-text animate__animated animate__bounce">
    <h1>This is
      <span class="name">
        Dnull_P
      </span>
    </h1>
    Welcome Hell !

  </div>
</div>

<div class="background-coverage">
  <!--Typed text-->
  <div class="background-coverage-text">
    <span id="background-coverage-text">
    </span>
  </div>
</div>

<div class="background-occupation">

</div>

  <div class="navigator">
  <div class="navi-buttom-container">
    
    
  <a href="/" class="navi-buttom">
    <div>
      Home
    </div>
  </a>
  
  
    
  <a href="/about" class="navi-buttom">
    <div>
      About
    </div>
  </a>
  
  
    
  <a href="/contact" class="navi-buttom">
    <div>
      Contact
    </div>
  </a>
  
  
    
    <div class="navi-dropdown">
      <div class="dropbtn">
        post
      </div>
      <div class="dropdown-content">
        
        <a href="/archives">
          Aarchives
        </a>
        
        <a href="/tags">
          Tags
        </a>
        
      </div>
    </div>
  </div>
  
  
</div>

  <div class="page-container">
    <div class="slidebar-warp">
  <div class="slidebar">
    <div class="panel">

      <div class="avatar">
        <img src="/pic/avatar.jpg" alt="">
      </div>

      <div class="info">
        <div class="subinfo-1">
          <div class="subinfo-1-left">
            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Post
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  163
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Cate
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  40
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Tag
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  198
                </div>
              </div>
            </div>

          </div>

          <div class="subinfo-1-right">
            <div class="subinfo-1-right-inner">
              <div class="subinfo-1-right-front">
                This Month
              </div>
              <div class="subinfo-1-right-back random-color">
                9
              </div>
            </div>
          </div>
        </div>

        <div class="subinfo-2-wrap">
          <div class="subinfo-2">

            
            <div class="sociallink">
    <a href=https://github.com/DnullP>
      <img src="/svg/github.svg" alt="">
    </a>
</div>
            

          </div>
        </div>
      </div>

      <div class="more-opt">

      </div>

    </div>

    <div class="icon-warp">


      <button class="hide-slidebar-button">
        <img src="/svg/arrow-right-line.svg" id="slideBarArrow">
      </button>


    </div>
  </div>
</div>

    <div class="content">
      




<div class="card-container">

  <div class="card-list-title">
  <div class="card-list-title-text">
    <h2 class="divider">
      
      文章列表
      
    </h2>
  </div>
  
</div>

  
  
  

<div class="card" style="justify-content: left;">

  <div class="card-content">

    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        4.6k字
      </div>
      <div class="card-info">
        阅读时间: 4 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <div style="transform: translateX(10px);">
      <a class="card-title" href="/2021/01/01/design-pattern/principle/">
        设计模式
      </a>
      <span class="card-abstract" style="transform: translateX(0px);">
        
#### 1.6 How design pattern solve design problems

there are some tips taken down:
- **request** is the **only** way to get an object to excute an operation, and **operation** is the only way to change the **internal data**.
  we call this  **encapsulated**.

How to design a pattern?

- 1.find the appropriate object
- 2.determine the granularity of objects
- 3.specifying object interface
  **signature**: name, parameters, return value of a operation
  **interface**: it defines all signatures of an object
  **type**: to call a particular interface
  different types may share their interface, and we call a type owning a subset of another type&#39;s interface **subtype**.
  **type is not same as class. class includes implement, field, internal state of an object, while type just refers to its interface which indicates the set of requests that it can handle and respond.**
  because of the different implement of the same interface of objects, it is a run-time association between requests and operation, which we call **&#34;dynamic binding&#34;**.
- 4.specifying object implementation
  objects are **instantiating** from a class to be an **instance**.
  we use such diagram to describe a pattern:

a class is present as below:
```plantuml
@startuml
class ClassName{
  Fuction( )
  Variable
}
@enduml
```

this dashed arrowhead line indicates a class that instantiating objects of another class.
```plantuml
@startuml
class Instantiator
class Instantiatee
Instantiator .&gt;Instantiatee
hide members
hide circle
@enduml
```
and this indicates an inheritance relationship, and it&#39;s usually vertical.
```plantuml
@startuml
class ParentClass{
  operation( )
  Variables
}
class Subclass{
  operation( )
  Variables
}
ParentClass &lt;|-- Subclass
@enduml
```
this is an Abstract class and its Subclass 
```plantuml
@startuml
hide field
Abstract AbstractClass{
  operation ( )
}
Class ConcreteSubclass{
  operation ( )
}
note right of ConcreteSubclass::&#34;operation ( )&#34;
  implementation
  pseudocode
end note
AbstractClass &lt;|-- ConcreteSubclass
@enduml
```

This is a mixin class which provide an optional interface:

```plantuml
@startuml
hide field
class ExistingClass{
  operation_1 ( )
}
interface MixinClass{
  operation_2 ( )
}
class Subclass{
  operation_1 ( )
  operation_2 ( )
}
ExistingClass &lt;|-- Subclass
MixinClass &lt;|-- Subclass
@enduml
```
we emphasize that **program to an interface, not an implementation**.
the most important is not code-sharing, but the relationship between class, and interface inheritance make sure the change can be carried out more easily.

- class inheritance make let you implement a class in term of another one.
- interface inheritance describe a kind of classes can be used somewhere.
if we implement a class in term of a interface, this class can be uesed in everyplace where use the interface.

##### inheritance versus composition
it&#39;s two kinds of method to reuse code.
composition is to assembling the objects to get a more complecated functionality, which we also call &#34;black box reuse&#34;, because we don&#39;t know the detailed implementation of each object.

we emphasize that **&#34;Favor object composition over class inheritance&#34;**.
It enhances the degree of encasulation.

#### delegation
it is a way to making the composition. we instantiate a class to an object in another class, and forward the require from the superclass to the internal object so that to realize the composition.

dpciting a diagram below:

```plantuml
@startuml
hide field
class Window{
  +Area ( )
}
show Rectangle fields
class Rectangle{
  +Area ( )
  +width
  +height
}
note &#34;return rectangle-&gt;Area ( )&#34; as N1
Window::Area &lt;-- N1
note &#34;return width * height&#34; as N2
Rectangle::Area &lt;--N2
Window &#34;rectangle&#34; -&gt; Rectangle
@enduml
```

#### aggregation and acquaintance
aggregation implies that one object own another one, which we dpcit as below: (aggregator own the aggregatee)

```plantuml
@startuml
hide method
hide fields

class aggregator
class aggregatee

aggregator o-&gt; aggregatee
@enduml
```
and the acquaintance implies they just have a somehow relationship, but not responsiblity for one another: 
```plantuml
@startuml
hide method
hide fields

class ClassA
class ClassB

ClassA -&gt; ClassB
@enduml
```

#### design for change
different patterns make the system more rebust in a particular kind of change

#### difference between a framework and a pattern
- a pattern is usually a conception and abstraction, but a framework has concret code and implement.
- a pattern is a small unit than framework
- a pattern is less specialized than framework



      </span>
    </div>
  </div>

  <div class="card-img">
    <div class="img-container"></div>
  </div>

</div>



  
  
  
<div class="card" style="justify-content: right;">

  <div class="card-img">
    <div class="img-container"></div>
  </div>

  <div class="card-content">
    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        828字
      </div>
      <div class="card-info">
        阅读时间: 1 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <a class="card-title" href="/2021/01/01/design-pattern/prototype/">
      原型模式
    </a>
    <span class="card-abstract">
      
### 原型模式

我们先来看一看之前的abstract factory和factory method

![avator](https://www.tutorialspoint.com/design_pattern/images/abstractfactory_pattern_uml_diagram.jpg)

在这个抽象工厂中，为了得到一个Shape或者RoundedShape，需要两种不同的工厂
如果我们现在拥有四个具体产品的每一个object，那么我们就可以舍弃工厂，而定义一个Prototype的接口，通过把这四个具体产品实现Prototype的接口，来给与他们自拷贝的能力
这样一来，我们可以通过一个拷贝来获得Object，而不是工厂，而我们的类的数量就减少了（工厂类全部舍弃了）

通过这种用原型拷贝的方式得到Object的模式，我们可以实现以下应用：
- 减少框架中的类种类
- 避免“需要建立平行的hierarchy”的情况，就像工厂方法中那样
- 需要保存一个object的状态作为标准时，这种情况尤其在运行时发生

![avator](https://www.tutorialspoint.com/design_pattern/images/prototype_pattern_uml_diagram.jpg)

总结下来，原型模式的要点就是实现原型接口，提供clone方法

Some of the tips：
- 对于原型，需要一个Manage类，因为用户不会亲自去管理这些Prototype，而只是负责储存和retrieve
- 此外可以给原型类添加初始化，以满足一些需求

- JAVA的Prototype可通过继承Cloneable接口来实现

    </span>

  </div>

</div>



  
  
  

<div class="card" style="justify-content: left;">

  <div class="card-content">

    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        1.7k字
      </div>
      <div class="card-info">
        阅读时间: 2 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <div style="transform: translateX(10px);">
      <a class="card-title" href="/2021/01/01/design-pattern/proxy/">
        Proxy pattern
      </a>
      <span class="card-abstract" style="transform: translateX(0px);">
        
### 代理模式

说起代理就容易让人想起网络上的代理，简单来说，就是在一个数据接收方之前加入一个第三方服务器先接收数据，然后转发给原本的接收方

设计模式上的代理模式也是一样的思想：在某个类提供的服务前加入一个类，这个类有着和原本的类相同的接口，但是实际上是原本类的聚合（aggregate），代理类可以在访问原本类的服务之前或之后进行某些处理

来自refactoring.guru的类图：

![](https://refactoring.guru/images/patterns/diagrams/proxy/structure.png)

以上包含四个要素：
- Client
- ServiceInterface
  这是服务的接口，代理类和原本的服务类都是实现自该接口
- Service
  这是服务类，包含一系列的方法(operation)
- Proxy
  这是代理类，包含了Service类和代理类的方式

以下是来自noob note的代码：

```java
public interface Image {
   void display();
}
```
这是服务接口
```java
public class RealImage implements Image {
 
   private String fileName;
 
   public RealImage(String fileName){
      this.fileName = fileName;
      loadFromDisk(fileName);
   }
 
   @Override
   public void display() {
      System.out.println(&#34;Displaying &#34; + fileName);
   }
 
   private void loadFromDisk(String fileName){
      System.out.println(&#34;Loading &#34; + fileName);
   }
}
```
这是原本提供服务的类


```java
public class ProxyImage implements Image{
 
   private RealImage realImage;
   private String fileName;
 
   public ProxyImage(String fileName){
      this.fileName = fileName;
   }
 
   @Override
   public void display() {
      if(realImage == null){
         realImage = new RealImage(fileName);
      }
      realImage.display();
   }
}
```
这是代理类


```java
public class ProxyPatternDemo {
   
   public static void main(String[] args) {
      Image image = new ProxyImage(&#34;test_10mb.jpg&#34;);
 
      // 图像将从磁盘加载
      image.display(); 
      System.out.println(&#34;&#34;);
      // 图像不需要从磁盘加载
      image.display();  
   }
}
```
这是用户代码

代理模式的逻辑思想相对简单

      </span>
    </div>
  </div>

  <div class="card-img">
    <div class="img-container"></div>
  </div>

</div>



  
  
  
<div class="card" style="justify-content: right;">

  <div class="card-img">
    <div class="img-container"></div>
  </div>

  <div class="card-content">
    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        257字
      </div>
      <div class="card-info">
        阅读时间: 1 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <a class="card-title" href="/2021/01/01/design-pattern/singleton/">
      单例模式
    </a>
    <span class="card-abstract">
      
### 单例模式

单例模式没什么值得多说的，记住几个原则和使用方法

- 保证object只有一个
- 我们可以定义一个单例接口，然后实现一堆单例类，在不同的环境使用不同的单例类，但是必须保证每个环境只有一个这样的单例类，我们通过构建一个registry来管理注册这些不同的单例类

- 单例类可以用来优化全局变量，减少命名空间的使用

    </span>

  </div>

</div>



  
  
  

<div class="card" style="justify-content: left;">

  <div class="card-content">

    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        1.9k字
      </div>
      <div class="card-info">
        阅读时间: 2 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <div style="transform: translateX(10px);">
      <a class="card-title" href="/2021/01/01/design-pattern/strategy/">
        Strategy
      </a>
      <span class="card-abstract" style="transform: translateX(0px);">
        
### Strategy

策略模式是与算法的选择有关的设计模式
现在假设我们有一个地图导航程序，我们通过输入起点和终点，能够得到一条线路，我们通过不同的算法可以得到最短线路、步行线路、经过景点的线路等等

为了实现代码复用和维护方便，我们把不同的算法封装为类，满足一个接口，让程序通过接口调用不同的算法，这样的思想就是策略模式

下面是来自refactoring的UML图：

![](https://refactoring.guru/images/patterns/diagrams/strategy/structure.png)

这里面包含了四个要素：
- Client
- Strategy
  这是策略算法的接口类，其中包含一个接收参数返回结果的方法
- Context
  在Context中包含strategy接口，并且可以根据需求改变strategy，用以执行不同的算法

下面是来自noob note的代码：

```java
public interface Strategy {
   public int doOperation(int num1, int num2);
}
```
算法策略的接口
```java
public class OperationAdd implements Strategy{
   @Override
   public int doOperation(int num1, int num2) {
      return num1 + num2;
   }
}
```

```java
public class OperationSubtract implements Strategy{
   @Override
   public int doOperation(int num1, int num2) {
      return num1 - num2;
   }
}
```

```java
public class OperationMultiply implements Strategy{
   @Override
   public int doOperation(int num1, int num2) {
      return num1 * num2;
   }
}
```
上面实现了三种不同的算法
```java
public class Context {
   private Strategy strategy;
 
   public Context(Strategy strategy){
      this.strategy = strategy;
   }
 
   public int executeStrategy(int num1, int num2){
      return strategy.doOperation(num1, num2);
   }
}
```
上下文包含策略的管理方式
```java
public class StrategyPatternDemo {
   public static void main(String[] args) {
      Context context = new Context(new OperationAdd());    
      System.out.println(&#34;10 + 5 = &#34; + context.executeStrategy(10, 5));
 
      context = new Context(new OperationSubtract());      
      System.out.println(&#34;10 - 5 = &#34; + context.executeStrategy(10, 5));
 
      context = new Context(new OperationMultiply());    
      System.out.println(&#34;10 * 5 = &#34; + context.executeStrategy(10, 5));
   }
}
```
使用不同的策略进行计算

      </span>
    </div>
  </div>

  <div class="card-img">
    <div class="img-container"></div>
  </div>

</div>



  
  
  
<div class="card" style="justify-content: right;">

  <div class="card-img">
    <div class="img-container"></div>
  </div>

  <div class="card-content">
    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        2.1k字
      </div>
      <div class="card-info">
        阅读时间: 2 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <a class="card-title" href="/2021/01/01/design-pattern/template/">
      Template
    </a>
    <span class="card-abstract">
      
### Template

模板模式和我们平时用的template也有思想相似之处

现在假设我们有一个处理文档的程序，需要先读取文档，然后将其进行处理，最后输出结果。我们读取的文档可能是不同的格式，比如PDF、DOC、TXT等，那么我们的程序在读取文档和输出阶段就会有不同方法，但是对内容的处理是相同的行为

我们可以将这个程序的算法拆为几个部分：读取文档、内容处理、结果输出，既然内容处理都是相同的，就把内容处理的方法实现，作为父类，派生出多个实现了不同文档读取和输出的类，实现了对单个步骤不同的程序的代码复用

下面是来自refactoring的UML图：

![](https://refactoring.guru/images/patterns/diagrams/template-method/structure.png)

上图有三个要素：

- AbstractClass
  这个抽象类包含了模板方法的执行（按照一定的顺序）
  然后实现了一部分需要共用的方法，其余方法则作为抽象函数
- ConcreteClass
  这里派生的子类实现了其余的方法，需要的话也可以重写父类的方法
  这样的派生同样可以派生很多层，实现不同情况的多种业务逻辑

下面是来自noob note的代码

```java
public abstract class Game {
   abstract void initialize();
   abstract void startPlay();
   abstract void endPlay();
 
   //模板
   public final void play(){
 
      //初始化游戏
      initialize();
 
      //开始游戏
      startPlay();
 
      //结束游戏
      endPlay();
   }
}
```
这里定义了最初的父类，```play()```是业务逻辑函数，所以加上了 ```final```的关键字，使得其不可被子类重写
```java
public class Cricket extends Game {
 
   @Override
   void endPlay() {
      System.out.println(&#34;Cricket Game Finished!&#34;);
   }
 
   @Override
   void initialize() {
      System.out.println(&#34;Cricket Game Initialized! Start playing.&#34;);
   }
 
   @Override
   void startPlay() {
      System.out.println(&#34;Cricket Game Started. Enjoy the game!&#34;);
   }
}
```

```java
public class Football extends Game {
 
   @Override
   void endPlay() {
      System.out.println(&#34;Football Game Finished!&#34;);
   }
 
   @Override
   void initialize() {
      System.out.println(&#34;Football Game Initialized! Start playing.&#34;);
   }
 
   @Override
   void startPlay() {
      System.out.println(&#34;Football Game Started. Enjoy the game!&#34;);
   }
}
```
这里的两个派生类分别实现了不同的两种业务逻辑
```java
public class TemplatePatternDemo {
   public static void main(String[] args) {
 
      Game game = new Cricket();
      game.play();
      System.out.println();
      game = new Football();
      game.play();      
   }
}
```
我们在使用模板时，也是将尖括号中的类型直接替换成另一种，这里的模板方法则是将类型换成了方法，我们可以把不同的方法放进一个固定的业务逻辑中

由此我们也可以区别模板（template）和泛型（generic），模板是一个固定的业务逻辑中，固定替换某些类型或者方法，而泛型是你可以通过一个方法对任意一个满足条件的类型做处理（比如接口做参数）

    </span>

  </div>

</div>



  
  
  

<div class="card" style="justify-content: left;">

  <div class="card-content">

    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        2.1k字
      </div>
      <div class="card-info">
        阅读时间: 2 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <div style="transform: translateX(10px);">
      <a class="card-title" href="/2021/01/01/design-pattern/visitor/">
        Visitor
      </a>
      <span class="card-abstract" style="transform: translateX(0px);">
        
### Visitor

访问者模式

在讨论这个模式之前，我们先讨论一下double dispatch（双分派）

当一个函数存在多个重载时，编译器会怎么选择函数的重载？
如果这些重载的参数毫无关系，编译器自然是选择符合要求的重载

但是如果接收的参数是一个接口（父类）以及一系列他的子类，编译器会怎么选择呢？

我们看一下下面两种代码（动态绑定和静态绑定）：

```java
method drawShape(shape: Shape) is
    shape.draw();
```
这里我们能保证每个shape都包含有 ```draw()```函数，具体的使用的哪种```draw()```函数会等到参数传递之后再决定

```java
method exportShape(shape: Shape) is
    Exporter exporter = new Exporter()
    exporter.export(shape);
```
然后我们看这种情况，```Exporter```类中包含了许多个Shape及其派生类的函数重载，看起来我们需要用到动态绑定，在传入shape后再决定调用哪个函数，但是实际上函数 ```export()```并不知道自己的重载函数有没有覆盖全部的 ```Shape```的派生类，如果使用动态绑定的话，如果传入了一个没有实现的派生类，则会找不到对应的函数，所以这里采用了早绑定的方式，所有的类传入后都当作参数里确定的类型 ```Shape```处理

为了让这样的重载函数能够被识别，下面使用了一种称为双派发的技巧：

```java
class Visitor is
    method visit(s: Shape) is
        print(&#34;Visited shape&#34;)
    method visit(d: Dot)
        print(&#34;Visited dot&#34;)

interface Graphic is
    method accept(v: Visitor)

class Shape implements Graphic is
    method accept(v: Visitor)
        v.visit(this)

class Dot extends Shape is
    method accept(v: Visitor)
        v.visit(this)

Visitor v = new Visitor();
Graphic g = new Dot();

g.accept(v);
```
这段代码中，```accept()```函数接收Visitor类，但是函数的重载并不是在```accept()```中实现，而是在被接收的参数类中实现，并且让其将自己作为参数执行重载函数

这时，调用重载函数的对象就从外部对象变成了内部对象（自身），此时编译器就能确定传递给函数的参数一定是对象自己的类，就能够确定调用那个重载函数了

这样的方式我认为还是动态绑定，```this```只有传递了参数后才知道类型，只是函数的重载从外部到了内部，编译器的视角变了，从而能够确定重载函数的调用

---

现在让我们把视角转到访问者模式上

现在我们有一个由不同类型组成的图，我们希望遍历这个图，并对这些节点执行某个操作，很明显我们针对每个类编写这个操作的函数，那么我们该怎么样完成遍历部分呢？

通过条件判断节点类型并使用不同函数显然有些麻烦，我们希望把所有的这些函数写到一个类中，方便进行维护管理，所以我们把这个操作写到一个Visitor类中，并使用重载函数的方式使其在不同类型的节点上表现不同

然后我们在所有的节点中实现一个```accept(v: Visitor)```方法，通过这个方法调用 ```v.theMethod(this)```，通过上面介绍的双分配法，让传递的Visitor能够针对不同类型的节点执行不同的操作，这就是访问者模式

下面是来自refactoring的UML图：

![](https://refactoring.guru/images/patterns/diagrams/visitor/structure-en.png)

其中包含两个主要要素：

- Visitor
  访问者实现不同类型的执行函数的重载，被传入Element并根据其类型运行不同逻辑
- Element
  其中实现 ```accept(v: Visitor)```函数，接收访问者，传递自身，这样访问者就能确定传入的类一定是这个类本身，而不用考虑如果传入的是没有实现的类的情况（这是编译器为了防止错误的优化，现在这样的优化只会针对没有实现的类，而不是一视同仁）

      </span>
    </div>
  </div>

  <div class="card-img">
    <div class="img-container"></div>
  </div>

</div>



  
  
  
<div class="card" style="justify-content: right;">

  <div class="card-img">
    <div class="img-container"></div>
  </div>

  <div class="card-content">
    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        1.3k字
      </div>
      <div class="card-info">
        阅读时间: 1 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <a class="card-title" href="/2021/01/01/eng/GrammarClub/">
      《语法俱乐部整理》
    </a>
    <span class="card-abstract">
      
## 第一章 基本句型和补语

S：主语
V：动词
O：宾语
C：补语

**五种基本句型**：
1. SV
2. SVO
3. SVC
4. SVOO
5. SVOC

补语和宾语的区别在于宾语和主语不一定是同一个事物，而补语和主语是同一个事物，补语是对主语的描述、补充

动词中可以解释为“是”的词没有具体的含义，称之为连结动词，又叫**系动词**，这样的词即使去掉也不影响句子含义（中文上），宾补则是用来形容，或者和宾语是同一个体的补语

区别双宾语和宾补的区别，可以通过简单的在后两者之间加上“是”来鉴定

## 第二章 名词短语和冠词

#### 什么时候不需要加限定词？
后面的名词不适合用a、one来描述时，不需要限定词

专有名词也不适合加限定词

#### 表示所属关系时，无生命物体用of，有生命个体才使用s
legs of the table
the man&#39;s legs

**错题记录**
The prime minister is the real ruler and the prince is merely a **nobody**.
nobody指的是无名小卒，需要冠词a

Writing is one thing and talking is quite **another**.
the other表示两者中的一者，但是此处没有限定范围，所以用another

## 第三章 动词时态

动词需要考虑时态和状态，对于状态处理，可以当作补语来看待，状态分为进行状态、被动状态、一般状态，当动词具有这些特殊状态时，我们只需把前面的be动词当作动词主体，后面部分当作补语即可

The man was being questioned in the room.
首先这是个被动与进行状态同时存在的句子，questioned做being的补语，being做was的补语，表示时态的词实际上的是was

上面的这些时态都称为**简单式**，此外的时态称为**完成式**

简单式表示的是某一个时间点上发生的事，而完成式表示的是**某个时间点为止，前面一段时间的总和**内发生的事

eg.1:
I am sure I have seen this face somewhere.
我很确定我见过这个脸
表示的是从过去无限久到现在的时间内发生的事情

eg.2:
We hace been working overtime for a week to fill your order.
加班是从过去一周到现在这段时间一直发生的

eg.3:
The house has been redecorated twice since they moved in.
从搬进房子到现在发生过两次的事件

在完成式中时态的变化反应在have上，而不是动词了





    </span>

  </div>

</div>



  
  
  

<div class="card" style="justify-content: left;">

  <div class="card-content">

    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        1.3k字
      </div>
      <div class="card-info">
        阅读时间: 1 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <div style="transform: translateX(10px);">
      <a class="card-title" href="/2021/01/01/essay/2022-1-19/">
        关于游戏地图生成的想法
      </a>
      <span class="card-abstract" style="transform: translateX(0px);">
        
不同的游戏生成地图的方式有所不同，在此只是记录几种不同的生成地图的方式和思路

### 地牢型地图
参考游戏：
- 死亡细胞
- 传说法师
- 元气骑士

大部分的roguelike类游戏的关卡设计都是使用这种类型的地图生成方式，通过事先设计好的几类模板地图构成小房间，随机构成各类具有相似结构的房间。这样的探索可以给玩家初次的新鲜感，但是作为roguelike游戏，反复的游玩后，重复的关卡设计很容易使玩家疲倦

关于这种地图的实现思路是：
1. 在有限的网格中放置好关键房间
2. 用柏林噪音随机漫步生成联通路线
3. 根据路径的开口方向放置随机的房间

### 横板随机地图
参考游戏：
- 泰拉瑞亚
- 缺氧

横板的地图生成比较好想，一维噪音用于生成地表，然后根据深度在噪音图的规划下嵌入不同的其他方块，再根据需求加入不同的特殊建筑就好

只是生成这样一个二维的地图可以说是相当简单的生成方式了，但是为了做到某些效果而不断调整生成地图的参数也是一件复杂的工作

### 平面随机地图
参考游戏：
- 饥荒
  
饥荒的地图比较于泰拉瑞亚、缺氧这种地图还要简单，一个平面内只需要一块大陆保证联通就好了，柏林噪音到这里用不上了，不过或许可以使用分形方式生成的噪音，关于如何生成一块连通的二值化的图像咱还得再了解一下

### 三维地图

参考游戏：
- MC

这类地图生成是最复杂的，但也是最简单的
MC作为一款开源模板式的游戏，它的源代码中有它完整的地形生成方式，想要研究的话有着大量的资料和教程、文档可供参阅

一般来说，这样的地图首先采用柏林噪音生成高度图，根据高度初步生成海洋和雪山，再使用三维噪音在地底生成不连通洞穴，后续的就是各种复杂的修饰了，嵌入矿物、划分生物群系之类的

如果有足够的精力学习JAVA和MC的源码及文档的话，MC必定是一个值得学习的开源程序

### 几点地图生成中值得注意的问题

- 一般来说，随机生成的地图都会有一个对应的种子，而游戏使用这些种子作为依据生成伪随机数，进而生成噪声、创建地图。但是程序中一般不会使用系统相关的随机数生成，而是使用自行编写的随机数生成器，目的是为了使得不同的电脑、系统上只要游戏程序相同就能使用一个种子生成相同地图

- 就生成地图而言，初期进行地图生成的编写时，可以使用数据可视化工具直接生成柏林噪音灰度图的三维图像，对地形的随机生成方式进行调整，比如说使用Qt的可视化工具（真相是C#对于咱来说还是太不熟悉，很多高级特性运用不熟练，Qt使用C++编写，只要把重心放到Qt相关框架的学习上就好）
- 游戏编程永远和数学离不开关系，柏林噪音的实现原理和多元微积分、插值这些内容分不开，所以尽快完成基本的数学知识的学习很必要



      </span>
    </div>
  </div>

  <div class="card-img">
    <div class="img-container"></div>
  </div>

</div>



  
  
  
<div class="card" style="justify-content: right;">

  <div class="card-img">
    <div class="img-container"></div>
  </div>

  <div class="card-content">
    <div class="card-info-warp">
      <div class="card-info">
        2021-01-01
      </div>
      <div class="card-info">
        3.3k字
      </div>
      <div class="card-info">
        阅读时间: 3 mins.
      </div>
    </div>
    <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" width="392" height="2" viewBox="0 0 392 2" fill="none">
        <path d="M0 1L392 1.00003" stroke="#A5BFF2" />
      </svg>
    </div>
    <a class="card-title" href="/2021/01/01/essay/2022-1-8/">
      在ubuntu上安装SCIM智能拼音输入法
    </a>
    <span class="card-abstract">
      
今日开始学习《深入理解计算机结构体系》这本书，打算把环境换到Linux下，也算是对这个必备系统的一个熟悉。但是在一段时间的使用后我发现，这个ubuntu系统没有自带的中文输入法，怎么办呢，自己装个呗

但是并不熟悉Linux使用的情况下，我遇到了不少问题，解决后也对以后继续学习Linux系统的使用做下了一定的基础

---

## 安装SCIM

这一步涉及到的指令包括 ```apt install```、```sudo```

以后这些指令当然会常用

- 首先卸载SCIM，保证系统上没有安装SCIM
  ```sudo apt-get remove scim```
- 然后安装SCIM
  ```sudo apt-get install scim```

这里的问题并不大，但是安装后并没有安装中文输入法，所以还需要额外安装：

- ```sudo apt-get install scim-chinese```
  但是系统说找不到这样的package，所以可以单独一个个的输入法安装
  ```sudo apt-get install scim scim-pinyin scim-tables-zh im-switch scim-gtk-immodule```
  包括了智能拼音、五笔，和后面两个我也不清楚的输入方式

## 配置DNS
完成上面操作后，重启系统并没有可以使用的中文输入法

重新输入安装指令后发现，在安装中文输入方式时，出现了解析域名失败的错误

在网上查询后了解到，新安装的ubuntu系统没有配置合适的DNS服务器，所以通过gedit打开 ```etc/resolv.conf```，然后添加几个合适的DNS服务器即可
```
nameserver 202.98.96.68
nameserver 61.139.2.69
nameserver 8.8.8.8
```

## 更换软件apt源
在配置好DNS后，再次运行安装指令，出现了连接错误

所以说这就是很明显的软件源有问题了，通过搜索引擎，找到配置源文件 ```/etc/apt/sources.list```，替换内容为阿里云的源

```
# deb cdrom:[Ubuntu 16.04 LTS _Xenial Xerus_ - Release amd64 (20160420.1)]/ xenial main restricted
deb-src http://archive.ubuntu.com/ubuntu xenial main restricted #Added by software-properties
deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted
deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe #Added by software-properties
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe #Added by software-properties
deb http://mirrors.aliyun.com/ubuntu/ xenial universe
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe
deb http://mirrors.aliyun.com/ubuntu/ xenial multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse #Added by software-properties
deb http://archive.canonical.com/ubuntu xenial partner
deb-src http://archive.canonical.com/ubuntu xenial partner
deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe #Added by software-properties
deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe
deb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse
```

清华大学国内源：

```
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse
deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse
deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse
deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse
deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse
```

配置好源后，再次运行安装指令，成功安装中文输入法


    </span>

  </div>

</div>



  
</div>



<div id="paginator">
  <a class="extend prev" rel="prev" href="/page/10/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/12/">Next</a>
</div>
    </div>

  </div>



  
  <!-- scripts list from theme config.yml -->
  
  <script src="/js/layout/animation.js"></script>
  
  <script src="/js/layout/svg.js"></script>
  
  <script src="/js/csstool.js"></script>
  
  

</body>

</html>