

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>mediator [ Dnull_P Welcome~ ]</title>
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/Genso.css">
  
  <link rel="stylesheet" href="/css/layout/layout.css">
  
  <link rel="stylesheet" href="/css/layout/navigator.css">
  
  <link rel="stylesheet" href="/css/layout/page-container.css">
  
  <link rel="stylesheet" href="/css/layout/page-cover.css">
  
  <link rel="stylesheet" href="/css/layout/slidebar.css">
  
  <link rel="stylesheet" href="/css/index/index.css">
  
  <link rel="stylesheet" href="/css/index/recommend-card-container.css">
  
  <link rel="stylesheet" href="/css/index/card-container.css">
  
  <link rel="stylesheet" href="/css/index/card.css">
  
  <link rel="stylesheet" href="/css/post/post.css">
  
  <link rel="stylesheet" href="/css/post/idea.css">
  
  <link rel="stylesheet" href="/css/tool/color.css">
  
  
  <script>
    const urlList = ('https://s2.loli.net/2023/07/23/mivfcl7wqgVsYdP.jpg,https://s2.loli.net/2023/07/23/E3uyek7OVlJgtLT.jpg,https://s2.loli.net/2023/07/23/q9skN6cPAZ14fwH.png,https://s2.loli.net/2023/07/23/RedmkprBY81ZhaV.jpg,https://s2.loli.net/2023/07/23/pt1ArR7NqO8vMXl.png,https://s2.loli.net/2023/07/23/MZEW5UCFSBPiNvH.png,https://s2.loli.net/2023/07/23/8urpklSmq6xR5LF.jpg,https://s2.loli.net/2023/07/23/E6Os9tkrRP4FZ7f.jpg,https://s2.loli.net/2023/07/23/IPq4HsZCOfTMGxk.jpg,https://s2.loli.net/2023/07/23/sAhIbjyLeMBgfuw.jpg,https://s2.loli.net/2023/07/23/ipTsxHoDOawRrfM.png,https://s2.loli.net/2023/07/23/eTYKcWz7jb5mqyo.png,https://s2.loli.net/2023/07/23/lHLk3OMeY7qXnTP.jpg,https://s2.loli.net/2023/07/23/u9dvATztknGecmI.jpg,https://s2.loli.net/2023/07/23/calWvPZEbI9tG4o.png,https://s2.loli.net/2023/07/23/MLZr1j7hdDnIHGU.png,https://s2.loli.net/2023/07/23/PlqeV1XpgQrxI8u.jpg,https://s2.loli.net/2023/07/23/uWQXFEBh5iCcNJV.png,https://s2.loli.net/2023/07/23/xjcUksAMvHQVhim.jpg,https://s2.loli.net/2023/07/23/Bd46rfJ2HYhQGkM.jpg,https://s2.loli.net/2023/07/23/1BgtkI3Aw58qrGv.jpg,https://s2.loli.net/2023/07/23/z8naFUvWV7BfKud.jpg,https://s2.loli.net/2023/07/23/Xj4wlzuKTDQOmHh.png,https://s2.loli.net/2023/07/23/mKzLHqPkUWTivAu.png,https://s2.loli.net/2023/07/23/a36bWlVynziMrSU.jpg,https://s2.loli.net/2023/07/23/6ZNUeJAtDCRvWq8.jpg,https://s2.loli.net/2023/07/23/7nGYxgcyoi8aSIR.jpg,https://s2.loli.net/2023/07/23/EVeCvBAt1LOgJSU.jpg,https://s2.loli.net/2023/07/23/onE5MQBPGdzDROh.jpg,https://s2.loli.net/2023/07/23/316kgDancGthANM.jpg,https://s2.loli.net/2023/07/23/oeRXvLm5byqgazF.jpg,https://s2.loli.net/2023/07/23/HXj7NsSW5vyCoIn.jpg,https://s2.loli.net/2023/07/23/sqM2XznWeEol3f4.jpg,https://s2.loli.net/2023/07/23/xGAflC5roSOsJRz.jpg,https://s2.loli.net/2023/07/23/cF2oWANXImMREKx.jpg,https://s2.loli.net/2023/07/23/IqutSTML7EXRza3.jpg,https://s2.loli.net/2023/07/23/zYNG9XHIEfg4quh.png').split(',');
  </script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div class="background">
  

  <img src="https://s2.loli.net/2023/07/23/uWQXFEBh5iCcNJV.png" alt="">

  <div class="title-text animate__animated animate__bounce">
    <h1>This is
      <span class="name">
        Dnull_P
      </span>
    </h1>
    Welcome Hell !

  </div>
</div>

<div class="background-coverage">
  <!--Typed text-->
  <div class="background-coverage-text">
    <span id="background-coverage-text">
    </span>
  </div>
</div>

<div class="background-occupation">

</div>

  <div class="navigator">
  <div class="navi-buttom-container">
    
    
  <a href="/" class="navi-buttom">
    <div>
      Home
    </div>
  </a>
  
  
    
  <a href="/about" class="navi-buttom">
    <div>
      About
    </div>
  </a>
  
  
    
  <a href="/contact" class="navi-buttom">
    <div>
      Contact
    </div>
  </a>
  
  
    
    <div class="navi-dropdown">
      <div class="dropbtn">
        post
      </div>
      <div class="dropdown-content">
        
        <a href="/archives">
          Aarchives
        </a>
        
        <a href="/tags">
          Tags
        </a>
        
      </div>
    </div>
  </div>
  
  
</div>

  <div class="page-container">
    <div class="slidebar-warp">
  <div class="slidebar">
    <div class="panel">

      <div class="avatar">
        <img src="/pic/avatar.jpg" alt="">
      </div>

      <div class="info">
        <div class="subinfo-1">
          <div class="subinfo-1-left">
            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Post
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  163
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Cate
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  40
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Tag
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  198
                </div>
              </div>
            </div>

          </div>

          <div class="subinfo-1-right">
            <div class="subinfo-1-right-inner">
              <div class="subinfo-1-right-front">
                This Month
              </div>
              <div class="subinfo-1-right-back random-color">
                9
              </div>
            </div>
          </div>
        </div>

        <div class="subinfo-2-wrap">
          <div class="subinfo-2">

            
            <div class="sociallink">
    <a href=https://github.com/DnullP>
      <img src="/svg/github.svg" alt="">
    </a>
</div>
            

          </div>
        </div>
      </div>

      <div class="more-opt">

      </div>

    </div>

    <div class="icon-warp">


      <button class="hide-slidebar-button">
        <img src="/svg/arrow-right-line.svg" id="slideBarArrow">
      </button>


    </div>
  </div>
</div>

    <div class="content">
      <div class="post">
  <h1>mediator</h1>
  <h3 id="mediator"><a href="#mediator" class="headerlink" title="mediator"></a>mediator</h3><p>中介者模式简单来说就是在各个交互的类之间加上一个中间件，使得各个组件之间的交流通过中间件来控制，各个组件只能和中间件通信，对于每个组件来说其他组件都是未知的，这样使得组件之间实现了解耦，组件的代码得以在其他地方得到复用</p>
<p>比如我们现在要组成一个窗口，窗口内的按钮和label之间会相互影响，那么我们建立一个窗口类，这个窗口类可以接收所有按钮和label的请求，并处理请求，寻找合适的其他对象进行请求和通信</p>
<p>下面来看一下来自refactoring.guru的类结构图：</p>
<p><img src="https://refactoring.guru/images/patterns/diagrams/mediator/structure.png"></p>
<p>其中包含三个要素：</p>
<ul>
<li><p>Component<br>所有这些Component都是相互协作运行的一些类，他们都有一个中间件Mediator作为成员，来完成黑盒通信</p>
</li>
<li><p>Mediator<br>中间件接口，通过<code>notify()</code>方法来和其他组件交互</p>
</li>
<li><p>具体实现的中介者不再赘述</p>
</li>
</ul>
<p>下面是来自refactoring.guru的代码例子：</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// The mediator interface declares a method used by components</span>
<span class="token comment">// to notify the mediator about various events. The mediator may</span>
<span class="token comment">// react to these events and pass the execution to other</span>
<span class="token comment">// components.</span>
<span class="token keyword">interface</span> <span class="token class-name">Mediator</span> is
    method <span class="token function">notify</span><span class="token punctuation">(</span>sender<span class="token operator">:</span> <span class="token class-name">Component</span><span class="token punctuation">,</span> event<span class="token operator">:</span> string<span class="token punctuation">)</span>


<span class="token comment">// The concrete mediator class. The intertwined web of</span>
<span class="token comment">// connections between individual components has been untangled</span>
<span class="token comment">// and moved into the mediator.</span>
<span class="token keyword">class</span> <span class="token class-name">AuthenticationDialog</span> <span class="token keyword">implements</span> <span class="token class-name">Mediator</span> is
    <span class="token keyword">private</span> field title<span class="token operator">:</span> string
    <span class="token keyword">private</span> field loginOrRegisterChkBx<span class="token operator">:</span> <span class="token class-name">Checkbox</span>
    <span class="token keyword">private</span> field loginUsername<span class="token punctuation">,</span> loginPassword<span class="token operator">:</span> <span class="token class-name">Textbox</span>
    <span class="token keyword">private</span> field registrationUsername<span class="token punctuation">,</span> registrationPassword<span class="token punctuation">,</span>
                  registrationEmail<span class="token operator">:</span> <span class="token class-name">Textbox</span>
    <span class="token keyword">private</span> field okBtn<span class="token punctuation">,</span> cancelBtn<span class="token operator">:</span> <span class="token class-name">Button</span>

    constructor <span class="token class-name">AuthenticationDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is
        <span class="token comment">// Create all component objects by passing the current</span>
        <span class="token comment">// mediator into their constructors to establish links.</span>

    <span class="token comment">// When something happens with a component, it notifies the</span>
    <span class="token comment">// mediator. Upon receiving a notification, the mediator may</span>
    <span class="token comment">// do something on its own or pass the request to another</span>
    <span class="token comment">// component.</span>
    method <span class="token function">notify</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> event<span class="token punctuation">)</span> is
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sender <span class="token operator">==</span> loginOrRegisterChkBx and event <span class="token operator">==</span> <span class="token string">"check"</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>loginOrRegisterChkBx<span class="token punctuation">.</span>checked<span class="token punctuation">)</span>
                title <span class="token operator">=</span> <span class="token string">"Log in"</span>
                <span class="token comment">// 1. Show login form components.</span>
                <span class="token comment">// 2. Hide registration form components.</span>
            <span class="token keyword">else</span>
                title <span class="token operator">=</span> <span class="token string">"Register"</span>
                <span class="token comment">// 1. Show registration form components.</span>
                <span class="token comment">// 2. Hide login form components</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>sender <span class="token operator">==</span> okBtn <span class="token operator">&amp;&amp;</span> event <span class="token operator">==</span> <span class="token string">"click"</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>loginOrRegister<span class="token punctuation">.</span>checked<span class="token punctuation">)</span>
                <span class="token comment">// Try to find a user using login credentials.</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>found<span class="token punctuation">)</span>
                    <span class="token comment">// Show an error message above the login</span>
                    <span class="token comment">// field.</span>
            <span class="token keyword">else</span>
                <span class="token comment">// 1. Create a user account using data from the</span>
                <span class="token comment">// registration fields.</span>
                <span class="token comment">// 2. Log that user in.</span>
                <span class="token comment">// ...</span>


<span class="token comment">// Components communicate with a mediator using the mediator</span>
<span class="token comment">// interface. Thanks to that, you can use the same components in</span>
<span class="token comment">// other contexts by linking them with different mediator</span>
<span class="token comment">// objects.</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> is
    field dialog<span class="token operator">:</span> <span class="token class-name">Mediator</span>

    constructor <span class="token class-name">Component</span><span class="token punctuation">(</span>dialog<span class="token punctuation">)</span> is
        <span class="token keyword">this</span><span class="token punctuation">.</span>dialog <span class="token operator">=</span> dialog

    method <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is
        dialog<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"click"</span><span class="token punctuation">)</span>

    method <span class="token function">keypress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is
        dialog<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"keypress"</span><span class="token punctuation">)</span>

<span class="token comment">// Concrete components don't talk to each other. They have only</span>
<span class="token comment">// one communication channel, which is sending notifications to</span>
<span class="token comment">// the mediator.</span>
<span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> is
    <span class="token comment">// ...</span>

<span class="token keyword">class</span> <span class="token class-name">Textbox</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> is
    <span class="token comment">// ...</span>

<span class="token keyword">class</span> <span class="token class-name">Checkbox</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> is
    method <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is
        dialog<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"check"</span><span class="token punctuation">)</span>
    <span class="token comment">// ...</span></code></pre><p>上面的伪代码中，Mediator和Component互相包含<br>Mediator通过<code>notify()</code>方法被其他组件调用，并传递信息，从而执行规定的行为<br>而其他组件又包含在Mediator之中，可以被Mediator调用以完成各类功能响应</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
</div>

<div id="paginator">
  
</div>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({
    securityLevel: 'loose',
    theme: 'base',
  });
</script>


<!-- scripts list from theme config.yml -->

<script src="/js/post/mermaid.js"></script>


    </div>

  </div>



  
  <!-- scripts list from theme config.yml -->
  
  <script src="/js/layout/animation.js"></script>
  
  <script src="/js/layout/svg.js"></script>
  
  <script src="/js/csstool.js"></script>
  
  

</body>

</html>