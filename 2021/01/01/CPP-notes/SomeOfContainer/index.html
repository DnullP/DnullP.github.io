

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>C++的容器的碎片知识 [ Dnull_P Welcome~ ]</title>
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/Genso.css">
  
  <link rel="stylesheet" href="/css/layout/layout.css">
  
  <link rel="stylesheet" href="/css/layout/navigator.css">
  
  <link rel="stylesheet" href="/css/layout/page-container.css">
  
  <link rel="stylesheet" href="/css/layout/page-cover.css">
  
  <link rel="stylesheet" href="/css/layout/slidebar.css">
  
  <link rel="stylesheet" href="/css/index/index.css">
  
  <link rel="stylesheet" href="/css/index/recommend-card-container.css">
  
  <link rel="stylesheet" href="/css/index/card-container.css">
  
  <link rel="stylesheet" href="/css/index/card.css">
  
  <link rel="stylesheet" href="/css/post/post.css">
  
  <link rel="stylesheet" href="/css/post/idea.css">
  
  <link rel="stylesheet" href="/css/tool/color.css">
  
  
  <script>
    const urlList = ('https://s2.loli.net/2023/07/23/mivfcl7wqgVsYdP.jpg,https://s2.loli.net/2023/07/23/E3uyek7OVlJgtLT.jpg,https://s2.loli.net/2023/07/23/q9skN6cPAZ14fwH.png,https://s2.loli.net/2023/07/23/RedmkprBY81ZhaV.jpg,https://s2.loli.net/2023/07/23/pt1ArR7NqO8vMXl.png,https://s2.loli.net/2023/07/23/MZEW5UCFSBPiNvH.png,https://s2.loli.net/2023/07/23/8urpklSmq6xR5LF.jpg,https://s2.loli.net/2023/07/23/E6Os9tkrRP4FZ7f.jpg,https://s2.loli.net/2023/07/23/IPq4HsZCOfTMGxk.jpg,https://s2.loli.net/2023/07/23/sAhIbjyLeMBgfuw.jpg,https://s2.loli.net/2023/07/23/ipTsxHoDOawRrfM.png,https://s2.loli.net/2023/07/23/eTYKcWz7jb5mqyo.png,https://s2.loli.net/2023/07/23/lHLk3OMeY7qXnTP.jpg,https://s2.loli.net/2023/07/23/u9dvATztknGecmI.jpg,https://s2.loli.net/2023/07/23/calWvPZEbI9tG4o.png,https://s2.loli.net/2023/07/23/MLZr1j7hdDnIHGU.png,https://s2.loli.net/2023/07/23/PlqeV1XpgQrxI8u.jpg,https://s2.loli.net/2023/07/23/uWQXFEBh5iCcNJV.png,https://s2.loli.net/2023/07/23/xjcUksAMvHQVhim.jpg,https://s2.loli.net/2023/07/23/Bd46rfJ2HYhQGkM.jpg,https://s2.loli.net/2023/07/23/1BgtkI3Aw58qrGv.jpg,https://s2.loli.net/2023/07/23/z8naFUvWV7BfKud.jpg,https://s2.loli.net/2023/07/23/Xj4wlzuKTDQOmHh.png,https://s2.loli.net/2023/07/23/mKzLHqPkUWTivAu.png,https://s2.loli.net/2023/07/23/a36bWlVynziMrSU.jpg,https://s2.loli.net/2023/07/23/6ZNUeJAtDCRvWq8.jpg,https://s2.loli.net/2023/07/23/7nGYxgcyoi8aSIR.jpg,https://s2.loli.net/2023/07/23/EVeCvBAt1LOgJSU.jpg,https://s2.loli.net/2023/07/23/onE5MQBPGdzDROh.jpg,https://s2.loli.net/2023/07/23/316kgDancGthANM.jpg,https://s2.loli.net/2023/07/23/oeRXvLm5byqgazF.jpg,https://s2.loli.net/2023/07/23/HXj7NsSW5vyCoIn.jpg,https://s2.loli.net/2023/07/23/sqM2XznWeEol3f4.jpg,https://s2.loli.net/2023/07/23/xGAflC5roSOsJRz.jpg,https://s2.loli.net/2023/07/23/cF2oWANXImMREKx.jpg,https://s2.loli.net/2023/07/23/IqutSTML7EXRza3.jpg,https://s2.loli.net/2023/07/23/zYNG9XHIEfg4quh.png').split(',');
  </script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div class="background">
  

  <img src="https://s2.loli.net/2023/07/23/Bd46rfJ2HYhQGkM.jpg" alt="">

  <div class="title-text animate__animated animate__bounce">
    <h1>This is
      <span class="name">
        Dnull_P
      </span>
    </h1>
    Welcome Hell !

  </div>
</div>

<div class="background-coverage">
  <!--Typed text-->
  <div class="background-coverage-text">
    <span id="background-coverage-text">
    </span>
  </div>
</div>

<div class="background-occupation">

</div>

  <div class="navigator">
  <div class="navi-buttom-container">
    
    
  <a href="/" class="navi-buttom">
    <div>
      Home
    </div>
  </a>
  
  
    
  <a href="/about" class="navi-buttom">
    <div>
      About
    </div>
  </a>
  
  
    
  <a href="/contact" class="navi-buttom">
    <div>
      Contact
    </div>
  </a>
  
  
    
    <div class="navi-dropdown">
      <div class="dropbtn">
        post
      </div>
      <div class="dropdown-content">
        
        <a href="/archives">
          Aarchives
        </a>
        
        <a href="/tags">
          Tags
        </a>
        
      </div>
    </div>
  </div>
  
  
</div>

  <div class="page-container">
    <div class="slidebar-warp">
  <div class="slidebar">
    <div class="panel">

      <div class="avatar">
        <img src="/pic/avatar.jpg" alt="">
      </div>

      <div class="info">
        <div class="subinfo-1">
          <div class="subinfo-1-left">
            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Post
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  156
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Cate
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  37
                </div>
              </div>
            </div>

            <div class="subinfo-1-left-info">
              <div class="subinfo-1-left-info-inner">
                <div class="subinfo-1-left-info-front">
                  Tag
                </div>
                <div class="subinfo-1-left-info-back random-color">
                  191
                </div>
              </div>
            </div>

          </div>

          <div class="subinfo-1-right">
            <div class="subinfo-1-right-inner">
              <div class="subinfo-1-right-front">
                This Month
              </div>
              <div class="subinfo-1-right-back random-color">
                2
              </div>
            </div>
          </div>
        </div>

        <div class="subinfo-2-wrap">
          <div class="subinfo-2">

            
            <div class="sociallink">
    <a href=https://github.com/DnullP>
      <img src="/svg/github.svg" alt="">
    </a>
</div>
            

          </div>
        </div>
      </div>

      <div class="more-opt">

      </div>

    </div>

    <div class="icon-warp">


      <button class="hide-slidebar-button">
        <img src="/svg/arrow-right-line.svg" id="slideBarArrow">
      </button>


    </div>
  </div>
</div>

    <div class="content">
      <div class="post">
  <h1>C++的容器的碎片知识</h1>
  <p>容器的使用很频繁，只补充一些碎片化的知识</p>
<!-- more --->

<p>容器分为顺序容器、关联容器、无序容器<br>同一类型的容器具有一些相同的操作，这方便于我们进行记忆</p>
<h2 id="顺序容器"><a href="#顺序容器" class="headerlink" title="顺序容器"></a>顺序容器</h2><ul>
<li><code>vector</code></li>
<li><code>deque</code></li>
<li><code>list</code></li>
<li><code>forword_list</code></li>
<li><code>array</code></li>
<li><code>string</code></li>
</ul>
<h3 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h3><ul>
<li><p>对于在连续内存上储存数据的容器，才可以使用迭代器（指针）进行相减运算、大小比较，比如<code>vector</code>、<code>deque</code>等<br>但是<code>list</code>一类的离散储存的数据类型就不能这样操作。</p>
</li>
<li><p>但是对于初始化的前后迭代器可以用于<code>list</code>类型</p>
</li>
<li><p><code>swap()</code>函数交换的是引用，真实的数据储存并不受影响，因为STL的容器都是引用类型</p>
</li>
</ul>
<h3 id="emplace函数"><a href="#emplace函数" class="headerlink" title="emplace函数"></a>emplace函数</h3><p><code>emplace()</code>函数接收容器元素的构造函数的参数，并直接在容器的内存中构造元素</p>
<h3 id="sort函数"><a href="#sort函数" class="headerlink" title="sort函数"></a>sort函数</h3><ul>
<li><code>sort()</code>函数只能对支持随机访问的顺序容器进行排序</li>
</ul>
<h3 id="at-函数"><a href="#at-函数" class="headerlink" title="at()函数"></a>at()函数</h3><ul>
<li>使用下标运算符不会检查是否越界的问题，但是可以是使用<code>at(0)</code>函数，在下标越界后抛出<code>out_of_range</code>异常</li>
</ul>
<h3 id="erace-函数"><a href="#erace-函数" class="headerlink" title="erace()函数"></a>erace()函数</h3><ul>
<li>使用<code>erace()</code>函数删除两个迭代器之间的元素时，结尾的指针是一个区间的尾后指针</li>
</ul>
<h3 id="reserve-和resize-函数"><a href="#reserve-和resize-函数" class="headerlink" title="reserve()和resize()函数"></a>reserve()和resize()函数</h3><ul>
<li><p><code>reserve()</code>和<code>resize()</code>函数都只能扩张容器的大小，<code>resize()</code>只是删除了多余的元素，不影响容器的大小</p>
</li>
<li><p>容器的预留空间上不一定有元素，<code>resize()</code>会创造新的对象</p>
</li>
<li><p>对应的，需要区别 <code>size()</code>和 <code>capacity()</code>函数</p>
</li>
</ul>
<hr>
<p>其实啊，对于这些函数大概记住主要的集中使用方式就好了，具体有些什么复杂的功能可以在需要的时候再参阅资料，我不可能把一个语言的所有工具的每个细节都记得清清楚楚</p>
<hr>
<h3 id="有意思的find函数"><a href="#有意思的find函数" class="headerlink" title="有意思的find函数"></a>有意思的find函数</h3><p>不是指一般的<code>find()</code>函数，而是<code>find_first_of(arg)</code></p>
<p>其寻找字符串中，<code>arg</code>中任何一个字符第一次出现的位置</p>
<p>有点正则表达式的味道了</p>
<h3 id="字符串的值转换"><a href="#字符串的值转换" class="headerlink" title="字符串的值转换"></a>字符串的值转换</h3><ul>
<li><code>to_string()</code></li>
<li><code>stod()</code></li>
<li><code>stoi()</code></li>
</ul>
<p>之类的</p>
<p>这些都是<code>string</code>的外部函数</p>
<h3 id="容器的适配器"><a href="#容器的适配器" class="headerlink" title="容器的适配器"></a>容器的适配器</h3><p>这是一种面向对象的概念，应用于STL的容器中</p>
<p>我以前一直以为 <code>stack</code> <code>queue</code>之类的类也是一种容器，但是现在我明确看到了这种基于现有容器继承而来的类的标准命名——容器适配器</p>
<p>通过现有的容器来限制组合其操作，从而获得的新类</p>
<p><code>stack&lt;int,vector&lt;&gt; &gt;</code>我们通过 <code>vector</code>构造了一个栈，使得这个 <code>vector</code>可以使用栈的操作</p>
<p>而不设置指定实现容器的话，会使用一个默认的容器：</p>
<ul>
<li><code>stack</code>—— <code>deque</code></li>
<li><code>queue</code>—— <code>deque</code></li>
<li><code>priority_queue</code>—— <code>vector</code></li>
</ul>
<h2 id="泛型算法"><a href="#泛型算法" class="headerlink" title="泛型算法"></a>泛型算法</h2><p>虽然但是，泛型算法不仅适用于STL容器，而且适用于内置数组<br>一般包含于 <code>algorithm</code>和 <code>numeric</code></p>
<h3 id="泛型算法库原则："><a href="#泛型算法库原则：" class="headerlink" title="泛型算法库原则："></a>泛型算法库原则：</h3><p>算法不直接调用顺序容器操作，通过迭代器修改内存区间的元素顺序或数值</p>
<h3 id="插入迭代器"><a href="#插入迭代器" class="headerlink" title="插入迭代器"></a>插入迭代器</h3><p><code>back_inserter</code> 是一种插入迭代器，当解引用并给其赋值时，会自动调用容器的 <code>push_back</code>操作</p>
<p>此外还有<code>front_inserter()</code>、<code>inserter()</code>之类的插入迭代器</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> a<span class="token punctuation">;</span>

<span class="token keyword">auto</span> it <span class="token operator">=</span> <span class="token function">back_inserter</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//now "a" has been the back_inserter of a</span>

<span class="token operator">*</span>it <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token comment">//this way, it creates a new element at the end of the vector</span>

<span class="token function">fill_n</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//this way, we can append 10 new "10" into the vector</span></code></pre><h3 id="IO流对象迭代器"><a href="#IO流对象迭代器" class="headerlink" title="IO流对象迭代器"></a>IO流对象迭代器</h3><p>标准算法库搭配容器、迭代器玩出来的花样太多了，IO流对象的迭代器大概说明一下吧</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
   istream_iterator<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">int_in</span><span class="token punctuation">(</span>cin<span class="token punctuation">)</span><span class="token punctuation">;</span>
   istream_iterator<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> eof<span class="token punctuation">;</span>

   <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">++</span>int_in <span class="token operator">!=</span> eof<span class="token punctuation">)</span>
   <span class="token punctuation">&#123;</span>
       cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span>int_in<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre><p>以上这段代码中定义了从流中读取整数的迭代器， <code>++</code>操作为从流中析取一个整数，<code>*</code>操作是返回析取的数</p>
<p>需要注意的是，在定义<code>int_in</code>时，就已经执行过一次读取了，所以会有一次多出的输入</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp">istream_iterator<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">int_in</span><span class="token punctuation">(</span>cin<span class="token punctuation">)</span><span class="token punctuation">,</span> eof<span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>int_in<span class="token punctuation">,</span> eof<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>这是书上比较有趣的一个用法，通过连续的流输入得到一个整数和<br>通过这个例子稍微能理解流对象迭代器的设计思想了</p>
<p>对于顺序容器而言，泛型算法可以在一段连续的元素上执行操作，而流输入的数据也是连续的一整段元素，所以通过流对象迭代器来让泛型算法对用户的输入执行某些操作</p>
<p>基于这种思想，我们可以很容易的理解<code>ostream_iterator</code>的使用</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> a<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
ostream_iterator<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">out_</span><span class="token punctuation">(</span>cout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">copy</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> out_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fill_n</span><span class="token punctuation">(</span>out_<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>ostream_iterator</code>通过赋值进行输出，所以所有在连续迭代器区间上赋值的泛型算法都可以使用它进行输出</p>
<h2 id="反向迭代器"><a href="#反向迭代器" class="headerlink" title="反向迭代器"></a>反向迭代器</h2><p>这种东西真的只需要略过就好，简单易懂还没什么重要作用（暂时没有）</p>
<h2 id="泛型算法的标准"><a href="#泛型算法的标准" class="headerlink" title="泛型算法的标准"></a>泛型算法的标准</h2><p>每个算法都接受至少一个迭代器的范围，而算法要求传递的迭代器具有指定的类型</p>
<h3 id="迭代器类型"><a href="#迭代器类型" class="headerlink" title="迭代器类型"></a>迭代器类型</h3><ul>
<li>输入输出迭代器</li>
<li>前向迭代器</li>
<li>双向迭代器</li>
<li>随机访问迭代器</li>
</ul>
<p>有些算法接受第二个迭代器范围，一般涉及两个序列一起进行的操作，比如合并之类的</p>
<h3 id="算法命名"><a href="#算法命名" class="headerlink" title="算法命名"></a>算法命名</h3><ul>
<li><code>_if</code>——接受一个元素值的算法往往会有一个_if后缀版本的函数，接受的不为元素值，而是一个谓词</li>
<li><code>_copy</code>——将修改的容器拷贝到目标位置</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
</div>

<div id="paginator">
  
</div>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({
    securityLevel: 'loose',
    theme: 'forest',
  });
</script>


<!-- scripts list from theme config.yml -->

<script src="/js/post/mermaid.js"></script>


    </div>

  </div>



  
  <!-- scripts list from theme config.yml -->
  
  <script src="/js/layout/animation.js"></script>
  
  <script src="/js/layout/svg.js"></script>
  
  <script src="/js/csstool.js"></script>
  
  

</body>

</html>